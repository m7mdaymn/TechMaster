import{a as ne}from"./chunk-QE2MCLLX.js";import{b as B,d as Q}from"./chunk-KRVVGRJQ.js";import{a as te}from"./chunk-TIQSRMW3.js";import{b as H,d as Y,g as J,m as K,n as X,o as Z,t as ee}from"./chunk-HRUO5R4Q.js";import{a as G}from"./chunk-QFQZ7TF5.js";import"./chunk-XAZLOLJU.js";import{a as q}from"./chunk-JLLNXAHD.js";import"./chunk-AJDLSE77.js";import"./chunk-L2ZR2CCC.js";import{$a as v,Ab as o,Bb as _,Cb as C,Db as A,Fb as M,Gb as y,Hb as O,Ja as k,Jb as $,Mb as E,Na as l,Nb as P,Ob as I,W as w,Wa as S,Y as j,cb as D,db as R,eb as U,fb as T,ga as p,gb as f,ha as u,ic as N,jb as F,jc as W,kb as V,lb as n,mb as i,mc as L,nb as z,qb as x,sb as m,tb as c}from"./chunk-Q5RFH5SI.js";var oe=(a,d)=>d.value,re=(a,d)=>d.id;function le(a,d){if(a&1){let e=x();n(0,"button",31),m("click",function(){let t=p(e).$implicit,s=c();return u(s.setStatus(t.value))}),o(1),i()}if(a&2){let e=d.$implicit,r=c();U("active",r.activeStatus===e.value),l(),C(" ",e.label," ")}}function ae(a,d){a&1&&(n(0,"span",43),o(1,"Free"),i())}function se(a,d){if(a&1&&(n(0,"span"),o(1),i()),a&2){let e=c().$implicit;l(),C("",e.amount," EGP")}}function ce(a,d){if(a&1){let e=x();n(0,"button",49),m("click",function(){p(e);let t=c().$implicit,s=c();return u(s.approveEnrollment(t))}),o(1,"\u2705 Approve"),i(),n(2,"button",50),m("click",function(){p(e);let t=c().$implicit,s=c();return u(s.rejectEnrollment(t))}),o(3,"\u274C Reject"),i()}}function de(a,d){if(a&1){let e=x();n(0,"button",51),m("click",function(){p(e);let t=c().$implicit,s=c();return u(s.confirmPayment(t))}),o(1,"\u{1F4B0} Confirm"),i()}}function me(a,d){if(a&1){let e=x();n(0,"button",52),m("click",function(){p(e);let t=c().$implicit,s=c();return u(s.refund(t))}),o(1,"\u{1F4B8} Refund"),i()}}function pe(a,d){if(a&1){let e=x();n(0,"button",53),m("click",function(){p(e);let t=c().$implicit,s=c();return u(s.cancel(t))}),o(1,"\u{1F5D1}\uFE0F Cancel"),i()}}function ue(a,d){if(a&1){let e=x();n(0,"tr")(1,"td")(2,"div",32)(3,"div",33)(4,"span",34),o(5),i()()()(),n(6,"td")(7,"div",35)(8,"span",36),o(9),i(),n(10,"span",37),o(11),i()()(),n(12,"td"),o(13),E(14,"date"),i(),n(15,"td")(16,"div",38)(17,"div",39),z(18,"div",40),i(),n(19,"span"),o(20),i()()(),n(21,"td")(22,"span",41),o(23),i()(),n(24,"td")(25,"span",42),o(26),i()(),n(27,"td"),v(28,ae,2,0,"span",43)(29,se,2,1,"span"),i(),n(30,"td")(31,"div",44)(32,"button",45),m("click",function(){let t=p(e).$implicit,s=c();return u(s.viewDetails(t))}),o(33,"\u{1F441}\uFE0F"),i(),v(34,ce,4,0)(35,de,2,0,"button",46)(36,me,2,0,"button",47)(37,pe,2,0,"button",48),i()()()}if(a&2){let e=d.$implicit;l(5),_(e.student.email),l(4),_(e.course.title),l(2),_(e.course.instructor),l(2),_(I(14,18,e.enrolledAt,"mediumDate")),l(5),R("width",e.progress,"%"),l(2),C("",e.progress,"%"),l(2),T(e.status.toLowerCase()),l(),C(" ",e.status," "),l(2),T(e.paymentStatus.toLowerCase()),l(),C(" ",e.paymentStatus," "),l(2),f(e.amount===0?28:29),l(6),f(e.status==="Pending"||e.status==="UnderReview"?34:-1),l(),f(e.paymentStatus==="PaymentPending"&&e.status!=="Pending"&&e.status!=="UnderReview"?35:-1),l(),f(e.status==="Active"&&e.paymentStatus==="Paid"?36:-1),l(),f(e.status!=="Pending"&&e.status!=="UnderReview"?37:-1)}}function ge(a,d){a&1&&(n(0,"tr")(1,"td",54)(2,"span"),o(3,"\u{1F4DD}"),i(),n(4,"p"),o(5,"No enrollments found"),i()()())}function _e(a,d){if(a&1&&(o(0),n(1,"a",64),o(2," \u{1F4AC} WhatsApp "),i()),a&2){let e=c(2);C(" ",e.selectedEnrollment.student.phone," "),l(),D("href",e.getWhatsAppLink(e.selectedEnrollment.student.phone),k)}}function fe(a,d){a&1&&o(0," N/A ")}function xe(a,d){if(a&1){let e=x();n(0,"div",60)(1,"h3"),o(2,"Payment Screenshot"),i(),n(3,"div",68)(4,"img",69),m("click",function(){p(e);let t=c(2);return u(t.openImageInNewTab(t.selectedEnrollment.paymentScreenshotUrl))}),i()()()}if(a&2){let e=c(2);l(4),D("src",e.getMediaUrl(e.selectedEnrollment.paymentScreenshotUrl),k)}}function be(a,d){if(a&1){let e=x();n(0,"button",70),m("click",function(){p(e);let t=c(2);return t.approveEnrollment(t.selectedEnrollment),u(t.closeModal())}),o(1,"\u2705 Approve"),i(),n(2,"button",71),m("click",function(){p(e);let t=c(2);return t.rejectEnrollment(t.selectedEnrollment),u(t.closeModal())}),o(3,"\u274C Reject"),i()}}function Ce(a,d){if(a&1){let e=x();n(0,"button",72),m("click",function(){p(e);let t=c(2);return u(t.generateReceipt(t.selectedEnrollment))}),o(1,"\u{1F9FE} Generate Receipt"),i()}}function he(a,d){if(a&1){let e=x();n(0,"div",55),m("click",function(){p(e);let t=c();return u(t.closeModal())}),n(1,"div",56),m("click",function(t){return p(e),u(t.stopPropagation())}),n(2,"div",57)(3,"h2"),o(4,"Enrollment Details"),i(),n(5,"button",58),m("click",function(){p(e);let t=c();return u(t.closeModal())}),o(6,"\xD7"),i()(),n(7,"div",59)(8,"div",60)(9,"h3"),o(10,"Student Info"),i(),n(11,"div",61)(12,"span",62),o(13,"Name:"),i(),n(14,"span",63),o(15),i()(),n(16,"div",61)(17,"span",62),o(18,"Email:"),i(),n(19,"span",63),o(20),i()(),n(21,"div",61)(22,"span",62),o(23,"Phone:"),i(),n(24,"span",63),v(25,_e,3,2,"a",64)(26,fe,1,0),i()()(),n(27,"div",60)(28,"h3"),o(29,"Course Info"),i(),n(30,"div",61)(31,"span",62),o(32,"Course:"),i(),n(33,"span",63),o(34),i()(),n(35,"div",61)(36,"span",62),o(37,"Instructor:"),i(),n(38,"span",63),o(39),i()()(),n(40,"div",60)(41,"h3"),o(42,"Enrollment Info"),i(),n(43,"div",61)(44,"span",62),o(45,"Enrolled Date:"),i(),n(46,"span",63),o(47),E(48,"date"),i()(),n(49,"div",61)(50,"span",62),o(51,"Progress:"),i(),n(52,"span",63),o(53),i()(),n(54,"div",61)(55,"span",62),o(56,"Status:"),i(),n(57,"span",63),o(58),i()(),n(59,"div",61)(60,"span",62),o(61,"Payment:"),i(),n(62,"span",63),o(63),i()()(),v(64,xe,5,1,"div",60),i(),n(65,"div",65),v(66,be,4,0)(67,Ce,2,0,"button",66),n(68,"button",67),m("click",function(){p(e);let t=c();return u(t.closeModal())}),o(69,"Close"),i()()()()}if(a&2){let e=c();l(15),_(e.selectedEnrollment.student.name),l(5),_(e.selectedEnrollment.student.email),l(5),f(e.selectedEnrollment.student.phone?25:26),l(9),_(e.selectedEnrollment.course.title),l(5),_(e.selectedEnrollment.course.instructor),l(8),_(I(48,13,e.selectedEnrollment.enrolledAt,"medium")),l(6),C("",e.selectedEnrollment.progress,"%"),l(5),_(e.selectedEnrollment.status),l(5),A("",e.selectedEnrollment.paymentStatus," - ",e.selectedEnrollment.amount," EGP"),l(),f(e.selectedEnrollment.paymentScreenshotUrl?64:-1),l(2),f(e.selectedEnrollment.status==="Pending"||e.selectedEnrollment.status==="UnderReview"?66:-1),l(),f(e.selectedEnrollment.status==="Active"||e.selectedEnrollment.status==="Approved"?67:-1)}}var Ve=(()=>{class a{translate=w(B);enrollmentService=w(te);dashboardService=w(ne);toastr=w(G);enrollments=S([]);filteredEnrollments=S([]);loading=S(!0);searchQuery="";activeStatus="all";paymentFilter="all";dateFilter="";totalEnrollments=0;activeEnrollments=0;completedEnrollments=0;totalRevenue=0;showDetailsModal=!1;selectedEnrollment=null;statusTabs=[{value:"all",label:"\u{1F4CB} All"},{value:"Pending,UnderReview",label:"\u23F3 Needs Review"},{value:"Active",label:"\u2705 Active"},{value:"Completed",label:"\u{1F393} Completed"},{value:"Rejected",label:"\u274C Rejected"}];pendingEnrollments=0;ngOnInit(){this.loadEnrollments()}loadEnrollments(){this.loading.set(!0),this.enrollmentService.getAllEnrollments(1,100).subscribe({next:e=>{if(e.isSuccess&&e.data){let r=e.data.items.map(t=>({id:t.id,student:{name:t.userName||t.studentName||"Unknown",email:t.userEmail||t.studentEmail||"",avatar:t.userAvatar||"",phone:t.userPhone||t.studentPhone||""},course:{title:t.courseName||t.courseTitle||"",instructor:t.instructorName||"",courseId:t.courseId,price:t.coursePrice||0},enrolledAt:new Date(t.createdAt||t.enrolledAt||t.enrollmentDate),progress:t.progressPercentage||t.progress||0,status:t.status||"Active",paymentStatus:t.amountPaid&&t.amountPaid>0?"Paid":t.paymentStatus||"Free",amount:t.amountPaid||t.coursePrice||t.amount||t.paidAmount||0,paymentScreenshotUrl:t.paymentScreenshotUrl||t.paymentProofUrl||""}));this.enrollments.set(r),this.calculateStats(),this.filterEnrollments()}this.loading.set(!1)},error:()=>{this.toastr.error("Failed to load enrollments"),this.loading.set(!1)}})}calculateStats(){let e=this.enrollments();this.totalEnrollments=e.length,this.activeEnrollments=e.filter(r=>r.status==="Active").length,this.completedEnrollments=e.filter(r=>r.status==="Completed").length,this.pendingEnrollments=e.filter(r=>r.status==="Pending"||r.status==="UnderReview").length,this.totalRevenue=e.filter(r=>r.paymentStatus==="Paid").reduce((r,t)=>r+t.amount,0)}setStatus(e){this.activeStatus=e,this.filterEnrollments()}filterEnrollments(){let e=this.enrollments();if(this.activeStatus!=="all"){let r=this.activeStatus.split(",");e=e.filter(t=>r.includes(t.status))}if(this.paymentFilter!=="all"&&(e=e.filter(r=>r.paymentStatus===this.paymentFilter)),this.searchQuery){let r=this.searchQuery.toLowerCase();e=e.filter(t=>t.student.name.toLowerCase().includes(r)||t.student.email.toLowerCase().includes(r)||t.course.title.toLowerCase().includes(r))}this.filteredEnrollments.set(e)}apiUrl=q.apiUrl;getMediaUrl(e){return e?e.startsWith("http")||e.startsWith("data:")?e:`${this.apiUrl.replace("/api","")}${e.startsWith("/")?"":"/"}${e}`:""}openImageInNewTab(e){window.open(this.getMediaUrl(e),"_blank")}getWhatsAppLink(e){return e?`https://wa.me/${e.replace(/[^0-9+]/g,"").replace(/^\+/,"")}`:"#"}generateReceipt(e){let r=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),t=new Date(e.enrolledAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),s=`TM-${e.id.substring(0,8).toUpperCase()}`,g=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Receipt - ${s}</title>
        <style>
          body { font-family: 'Segoe UI', Arial, sans-serif; margin: 0; padding: 40px; background: #f5f5f5; }
          .receipt { max-width: 600px; margin: 0 auto; background: white; padding: 40px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
          .header { text-align: center; border-bottom: 2px solid #247090; padding-bottom: 20px; margin-bottom: 30px; }
          .logo { font-size: 28px; font-weight: bold; color: #247090; }
          .logo span { color: #333; }
          .receipt-title { font-size: 24px; color: #333; margin: 10px 0; }
          .receipt-number { color: #666; font-size: 14px; }
          .section { margin-bottom: 25px; }
          .section-title { font-weight: 600; color: #247090; margin-bottom: 10px; font-size: 14px; text-transform: uppercase; }
          .row { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #eee; }
          .row:last-child { border-bottom: none; }
          .label { color: #666; }
          .value { font-weight: 500; color: #333; }
          .total-section { background: #f8f9fa; padding: 20px; border-radius: 8px; margin-top: 30px; }
          .total-row { display: flex; justify-content: space-between; font-size: 20px; font-weight: bold; }
          .total-label { color: #333; }
          .total-value { color: #10b981; }
          .footer { text-align: center; margin-top: 30px; padding-top: 20px; border-top: 1px solid #eee; color: #888; font-size: 12px; }
          .status-badge { display: inline-block; padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; background: #d1fae5; color: #059669; }
          @media print { body { background: white; padding: 20px; } .receipt { box-shadow: none; } }
        </style>
      </head>
      <body>
        <div class="receipt">
          <div class="header">
            <div class="logo">Tech<span>Master</span></div>
            <div class="receipt-title">Payment Receipt</div>
            <div class="receipt-number">Receipt #: ${s}</div>
            <div class="receipt-number">Date: ${r}</div>
          </div>
          
          <div class="section">
            <div class="section-title">Student Information</div>
            <div class="row">
              <span class="label">Name</span>
              <span class="value">${e.student.name}</span>
            </div>
            <div class="row">
              <span class="label">Email</span>
              <span class="value">${e.student.email}</span>
            </div>
            ${e.student.phone?`<div class="row"><span class="label">Phone</span><span class="value">${e.student.phone}</span></div>`:""}
          </div>
          
          <div class="section">
            <div class="section-title">Course Details</div>
            <div class="row">
              <span class="label">Course</span>
              <span class="value">${e.course.title}</span>
            </div>
            <div class="row">
              <span class="label">Instructor</span>
              <span class="value">${e.course.instructor}</span>
            </div>
            <div class="row">
              <span class="label">Enrollment Date</span>
              <span class="value">${t}</span>
            </div>
            <div class="row">
              <span class="label">Status</span>
              <span class="value"><span class="status-badge">${e.status}</span></span>
            </div>
          </div>
          
          <div class="total-section">
            <div class="total-row">
              <span class="total-label">Amount Paid</span>
              <span class="total-value">${e.amount.toFixed(2)} EGP</span>
            </div>
          </div>
          
          <div class="footer">
            <p>Thank you for choosing TechMaster!</p>
            <p>This is an official receipt for your enrollment payment.</p>
            <p>For any questions, contact support&#64;techmaster.com</p>
          </div>
        </div>
        <script>window.print();<\/script>
      </body>
      </html>
    `,h=window.open("","_blank");h&&(h.document.write(g),h.document.close())}viewDetails(e){this.selectedEnrollment=e,this.showDetailsModal=!0}confirmPayment(e){this.enrollmentService.approveEnrollment(e.id,e.amount).subscribe({next:r=>{r.isSuccess?(this.toastr.success("Payment confirmed"),this.loadEnrollments()):this.toastr.error("Failed to confirm payment")},error:()=>{this.toastr.error("Failed to confirm payment")}})}approveEnrollment(e){let r=e.amount||e.course.price||0;this.enrollmentService.approveEnrollment(e.id,r).subscribe({next:t=>{t.isSuccess?(this.toastr.success("Enrollment approved successfully"),this.loadEnrollments()):this.toastr.error("Failed to approve enrollment")},error:()=>{this.toastr.error("Failed to approve enrollment")}})}rejectEnrollment(e){let r=prompt("Enter rejection reason (optional):");this.enrollmentService.rejectEnrollment(e.id,r||"Rejected by admin").subscribe({next:t=>{t.isSuccess?(this.toastr.success("Enrollment rejected"),this.loadEnrollments()):this.toastr.error("Failed to reject enrollment")},error:()=>{this.toastr.error("Failed to reject enrollment")}})}refund(e){confirm("Are you sure you want to refund this enrollment?")&&this.enrollmentService.rejectEnrollment(e.id.toString(),"Refund requested").subscribe({next:r=>{r.isSuccess?(this.toastr.success("Enrollment refunded"),this.loadEnrollments()):this.toastr.error("Failed to refund enrollment")},error:()=>{this.toastr.error("Failed to refund enrollment")}})}cancel(e){confirm("Are you sure you want to cancel this enrollment?")&&this.dashboardService.rejectEnrollment(e.id).subscribe({next:r=>{r?(this.toastr.success("Enrollment cancelled"),this.loadEnrollments()):this.toastr.error("Failed to cancel enrollment")},error:()=>{this.toastr.error("Failed to cancel enrollment")}})}closeModal(){this.showDetailsModal=!1,this.selectedEnrollment=null}exportEnrollments(){let e=this.filteredEnrollments(),r=["Student Name","Student Email","Course","Enrolled Date","Progress","Status","Payment Status","Amount"],t=e.map(b=>[b.student.name,b.student.email,b.course.title,new Date(b.enrolledAt).toLocaleDateString(),`${b.progress}%`,b.status,b.paymentStatus,b.amount.toString()]),s=[r,...t].map(b=>b.map(ie=>`"${ie}"`).join(",")).join(`
`),g=new Blob([s],{type:"text/csv;charset=utf-8;"}),h=document.createElement("a");h.href=URL.createObjectURL(g),h.download=`enrollments_${new Date().toISOString().split("T")[0]}.csv`,h.click(),this.toastr.success("Enrollments exported successfully")}static \u0275fac=function(r){return new(r||a)};static \u0275cmp=j({type:a,selectors:[["app-admin-enrollments"]],standalone:!0,features:[$],decls:101,vars:19,consts:[[1,"enrollments-page"],[1,"page-header"],[1,"header-left"],[1,"subtitle"],[1,"export-btn",3,"click"],[1,"stats-row"],[1,"stat-card"],[1,"stat-icon"],[1,"stat-info"],[1,"stat-value"],[1,"stat-label"],[1,"stat-card","revenue"],[1,"filters-bar"],[1,"search-box"],[1,"search-icon"],["type","text","placeholder","Search enrollments...",3,"ngModelChange","ngModel"],[1,"filter-tabs"],[3,"active"],[3,"ngModelChange","ngModel"],["value","all"],["value","Paid"],["value","Pending"],["value","Free"],["type","date",3,"ngModelChange","ngModel"],[1,"table-container"],[1,"pagination"],[1,"page-info"],[1,"page-controls"],["disabled",""],[1,"active"],[1,"modal-overlay"],[3,"click"],[1,"student-cell"],[1,"student-info"],[1,"student-email"],[1,"course-cell"],[1,"course-title"],[1,"course-instructor"],[1,"progress-cell"],[1,"progress-bar"],[1,"progress-fill"],[1,"status-badge"],[1,"payment-badge"],[1,"free-text"],[1,"actions-cell"],["title","View Details",1,"action-btn",3,"click"],["title","Confirm Payment",1,"action-btn","success"],["title","Refund",1,"action-btn","warning"],["title","Cancel",1,"action-btn","danger"],["title","Approve Enrollment",1,"action-btn","success",3,"click"],["title","Reject Enrollment",1,"action-btn","danger",3,"click"],["title","Confirm Payment",1,"action-btn","success",3,"click"],["title","Refund",1,"action-btn","warning",3,"click"],["title","Cancel",1,"action-btn","danger",3,"click"],["colspan","8",1,"empty-state"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"detail-section"],[1,"detail-row"],[1,"label"],[1,"value"],["target","_blank","title","Chat on WhatsApp",1,"whatsapp-btn",3,"href"],[1,"modal-footer"],[1,"receipt-btn"],[1,"close-modal-btn",3,"click"],[1,"payment-screenshot"],["alt","Payment Screenshot",3,"click","src"],[1,"approve-btn",3,"click"],[1,"reject-btn",3,"click"],[1,"receipt-btn",3,"click"]],template:function(r,t){r&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),o(4,"Enrollment Management"),i(),n(5,"p",3),o(6,"Manage all course enrollments"),i()(),n(7,"button",4),m("click",function(){return t.exportEnrollments()}),n(8,"span"),o(9,"\u{1F4CA}"),i(),o(10," Export "),i()(),n(11,"div",5)(12,"div",6)(13,"span",7),o(14,"\u{1F4DD}"),i(),n(15,"div",8)(16,"span",9),o(17),E(18,"number"),i(),n(19,"span",10),o(20,"Total Enrollments"),i()()(),n(21,"div",6)(22,"span",7),o(23,"\u23F3"),i(),n(24,"div",8)(25,"span",9),o(26),E(27,"number"),i(),n(28,"span",10),o(29,"Pending Review"),i()()(),n(30,"div",6)(31,"span",7),o(32,"\u{1F3AF}"),i(),n(33,"div",8)(34,"span",9),o(35),E(36,"number"),i(),n(37,"span",10),o(38,"Active"),i()()(),n(39,"div",11)(40,"span",7),o(41,"\u{1F4B0}"),i(),n(42,"div",8)(43,"span",9),o(44),E(45,"number"),i(),n(46,"span",10),o(47,"Total Revenue"),i()()()(),n(48,"div",12)(49,"div",13)(50,"span",14),o(51,"\u{1F50D}"),i(),n(52,"input",15),O("ngModelChange",function(g){return y(t.searchQuery,g)||(t.searchQuery=g),g}),m("ngModelChange",function(){return t.filterEnrollments()}),i()(),n(53,"div",16),F(54,le,2,3,"button",17,oe),i(),n(56,"select",18),O("ngModelChange",function(g){return y(t.paymentFilter,g)||(t.paymentFilter=g),g}),m("ngModelChange",function(){return t.filterEnrollments()}),n(57,"option",19),o(58,"All Payments"),i(),n(59,"option",20),o(60,"Paid"),i(),n(61,"option",21),o(62,"Pending"),i(),n(63,"option",22),o(64,"Free"),i()(),n(65,"input",23),O("ngModelChange",function(g){return y(t.dateFilter,g)||(t.dateFilter=g),g}),m("ngModelChange",function(){return t.filterEnrollments()}),i()(),n(66,"div",24)(67,"table")(68,"thead")(69,"tr")(70,"th"),o(71,"Student"),i(),n(72,"th"),o(73,"Course"),i(),n(74,"th"),o(75,"Enrolled Date"),i(),n(76,"th"),o(77,"Progress"),i(),n(78,"th"),o(79,"Status"),i(),n(80,"th"),o(81,"Payment"),i(),n(82,"th"),o(83,"Amount"),i(),n(84,"th"),o(85,"Actions"),i()()(),n(86,"tbody"),F(87,ue,38,21,"tr",null,re,!1,ge,6,0,"tr"),i()()(),n(90,"div",25)(91,"span",26),o(92),i(),n(93,"div",27)(94,"button",28),o(95,"\u2190"),i(),n(96,"button",29),o(97,"1"),i(),n(98,"button",28),o(99,"\u2192"),i()()()(),v(100,he,70,16,"div",30)),r&2&&(l(17),_(P(18,11,t.totalEnrollments)),l(9),_(P(27,13,t.pendingEnrollments)),l(9),_(P(36,15,t.activeEnrollments)),l(9),C("",P(45,17,t.totalRevenue)," EGP"),l(8),M("ngModel",t.searchQuery),l(2),V(t.statusTabs),l(2),M("ngModel",t.paymentFilter),l(9),M("ngModel",t.dateFilter),l(22),V(t.filteredEnrollments()),l(5),A(" Showing 1-",t.filteredEnrollments().length," of ",t.filteredEnrollments().length," "),l(8),f(t.showDetailsModal&&t.selectedEnrollment?100:-1))},dependencies:[L,W,N,ee,X,Z,H,K,Y,J,Q],styles:[".enrollments-page[_ngcontent-%COMP%]{padding:2rem;max-width:1400px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;margin-bottom:.25rem}.subtitle[_ngcontent-%COMP%]{color:#666}.export-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;background:#000;color:#fff;border:none;border-radius:8px;font-weight:600;cursor:pointer}.stats-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:1rem;margin-bottom:2rem}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.25rem;display:flex;align-items:center;gap:1rem;box-shadow:0 2px 12px #0000000f}.stat-card.revenue[_ngcontent-%COMP%]{background:linear-gradient(135deg,#247090,#1a5570);color:#fff}.stat-icon[_ngcontent-%COMP%]{font-size:2rem}.stat-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;display:block}.stat-label[_ngcontent-%COMP%]{font-size:.85rem;opacity:.8}.filters-bar[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1.5rem;flex-wrap:wrap}.search-box[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.75rem 1rem;background:#fff;border:2px solid #e0e0e0;border-radius:8px;flex:1;min-width:250px;max-width:350px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;outline:none;width:100%;font-size:.95rem}.filter-tabs[_ngcontent-%COMP%]{display:flex;gap:.5rem;background:#f8f9fa;padding:.25rem;border-radius:8px}.filter-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.625rem 1rem;border:none;background:transparent;border-radius:6px;font-weight:500;cursor:pointer}.filter-tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#fff;box-shadow:0 2px 8px #00000014}select[_ngcontent-%COMP%], input[type=date][_ngcontent-%COMP%]{padding:.75rem 1rem;border:2px solid #e0e0e0;border-radius:8px;font-size:.95rem;background:#fff}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 4px 20px #00000014;overflow:hidden}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%]{text-align:left;padding:1rem 1.25rem;background:#f8f9fa;font-weight:600;font-size:.85rem;color:#666}td[_ngcontent-%COMP%]{padding:1rem 1.25rem;border-bottom:1px solid #f0f0f0;vertical-align:middle}tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.student-cell[_ngcontent-%COMP%], .course-cell[_ngcontent-%COMP%]{display:flex;flex-direction:column}.student-cell[_ngcontent-%COMP%]{flex-direction:row;align-items:center;gap:.75rem}.student-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:#247090;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600;overflow:hidden}.student-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.student-name[_ngcontent-%COMP%], .course-title[_ngcontent-%COMP%]{font-weight:600}.student-email[_ngcontent-%COMP%], .course-instructor[_ngcontent-%COMP%]{font-size:.85rem;color:#666}.course-title[_ngcontent-%COMP%]{max-width:200px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.progress-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.progress-bar[_ngcontent-%COMP%]{width:80px;height:8px;background:#e0e0e0;border-radius:4px;overflow:hidden}.progress-fill[_ngcontent-%COMP%]{height:100%;background:#247090;border-radius:4px}.status-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:12px;font-size:.8rem;font-weight:600}.status-badge.active[_ngcontent-%COMP%], .status-badge.approved[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.status-badge.completed[_ngcontent-%COMP%]{background:#cce5ff;color:#004085}.status-badge.expired[_ngcontent-%COMP%], .status-badge.refunded[_ngcontent-%COMP%], .status-badge.rejected[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.status-badge.pending[_ngcontent-%COMP%], .status-badge.underreview[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.payment-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:12px;font-size:.8rem;font-weight:600}.payment-badge.paid[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.payment-badge.pending[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.payment-badge.free[_ngcontent-%COMP%]{background:#e2e3e5;color:#383d41}.free-text[_ngcontent-%COMP%]{color:#666}.actions-cell[_ngcontent-%COMP%]{display:flex;gap:.25rem}.action-btn[_ngcontent-%COMP%]{width:32px;height:32px;border:none;background:transparent;border-radius:6px;cursor:pointer;font-size:.9rem;transition:background .2s}.action-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0}.action-btn.success[_ngcontent-%COMP%]:hover{background:#d1fae5}.action-btn.warning[_ngcontent-%COMP%]:hover{background:#fef3c7}.action-btn.danger[_ngcontent-%COMP%]:hover{background:#fee2e2}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem!important;color:#666}.empty-state[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:3rem;display:block;margin-bottom:1rem}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:1.5rem}.page-info[_ngcontent-%COMP%]{color:#666}.page-controls[_ngcontent-%COMP%]{display:flex;gap:.25rem}.page-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:36px;height:36px;border:1px solid #e0e0e0;background:#fff;border-radius:6px;cursor:pointer;font-weight:500}.page-controls[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#247090;color:#fff;border-color:#247090}.page-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:16px;width:100%;max-width:500px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;border-bottom:1px solid #e0e0e0}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700}.close-btn[_ngcontent-%COMP%]{width:36px;height:36px;border:none;background:#f0f0f0;border-radius:50%;font-size:1.25rem;cursor:pointer}.modal-body[_ngcontent-%COMP%]{padding:1.5rem}.detail-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.detail-section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.detail-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.9rem;color:#666;margin-bottom:.75rem;text-transform:uppercase}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.5rem 0;border-bottom:1px solid #f0f0f0}.detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#666}.detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:600}.modal-footer[_ngcontent-%COMP%]{padding:1.5rem;border-top:1px solid #e0e0e0;display:flex;gap:.75rem;justify-content:flex-end}.close-modal-btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:2px solid #e0e0e0;background:#fff;border-radius:8px;font-weight:600;cursor:pointer}.approve-btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;background:#22c55e;color:#fff;border-radius:8px;font-weight:600;cursor:pointer}.approve-btn[_ngcontent-%COMP%]:hover{background:#16a34a}.reject-btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;background:#ef4444;color:#fff;border-radius:8px;font-weight:600;cursor:pointer}.reject-btn[_ngcontent-%COMP%]:hover{background:#dc2626}.receipt-btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;background:#3b82f6;color:#fff;border-radius:8px;font-weight:600;cursor:pointer}.receipt-btn[_ngcontent-%COMP%]:hover{background:#2563eb}.whatsapp-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.25rem;margin-left:.5rem;padding:.25rem .75rem;background:#25d366;color:#fff;text-decoration:none;border-radius:20px;font-size:.75rem;font-weight:600;transition:background .2s}.whatsapp-btn[_ngcontent-%COMP%]:hover{background:#128c7e}.payment-screenshot[_ngcontent-%COMP%]{margin-top:.5rem}.payment-screenshot[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:300px;border-radius:8px;border:1px solid #e0e0e0;cursor:pointer;transition:transform .2s}.payment-screenshot[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.02)}@media (max-width: 1200px){.stats-row[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 768px){.enrollments-page[_ngcontent-%COMP%]{padding:1rem}.page-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.stats-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.filters-bar[_ngcontent-%COMP%]{flex-direction:column}.search-box[_ngcontent-%COMP%]{max-width:none}.table-container[_ngcontent-%COMP%]{overflow-x:auto}}"]})}return a})();export{Ve as EnrollmentsComponent};
