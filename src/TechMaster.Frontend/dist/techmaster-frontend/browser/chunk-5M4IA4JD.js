import{a as R}from"./chunk-ZAODAAZN.js";import{b as A,c,d as V,e as j,h as $,k as q,l as H,s as B,u as D}from"./chunk-HRUO5R4Q.js";import{a as z}from"./chunk-QFQZ7TF5.js";import"./chunk-XAZLOLJU.js";import{a as k}from"./chunk-JLLNXAHD.js";import{c as N,d as I}from"./chunk-SAC5YDHM.js";import"./chunk-AJDLSE77.js";import"./chunk-L2ZR2CCC.js";import{$a as f,Ab as o,Bb as y,Jb as T,Na as l,W as h,Wa as P,Y as x,cb as w,eb as b,gb as _,ia as E,ja as F,lb as n,mb as t,mc as L,nb as m,pa as G,sb as M}from"./chunk-Q5RFH5SI.js";function W(a,C){a&1&&(n(0,"span",13),o(1,"Full name is required"),t())}function Z(a,C){a&1&&(n(0,"span",13),o(1,"Valid email is required"),t())}function J(a,C){a&1&&(n(0,"span",13),o(1,"Password must be at least 6 characters"),t())}function U(a,C){a&1&&(n(0,"span",13),o(1,"Passwords do not match"),t())}function X(a,C){a&1&&m(0,"span",24)}function Y(a,C){a&1&&o(0," Create Account ")}var se=(()=>{class a{fb=h(B);authService=h(R);router=h(N);toastr=h(z);ngZone=h(G);showPassword=P(!1);showConfirmPassword=P(!1);isLoading=P(!1);googleLoading=P(!1);registerForm=this.fb.group({fullName:["",[c.required,c.minLength(2)]],email:["",[c.required,c.email]],phone:[""],password:["",[c.required,c.minLength(6)]],confirmPassword:["",[c.required]]},{validators:this.passwordMatchValidator});ngAfterViewInit(){this.initializeGoogleSignIn()}initializeGoogleSignIn(){let i=setInterval(()=>{typeof google<"u"&&google.accounts&&(clearInterval(i),google.accounts.id.initialize({client_id:k.googleClientId,callback:r=>this.handleGoogleCallback(r),auto_select:!1,cancel_on_tap_outside:!0}))},100);setTimeout(()=>clearInterval(i),1e4)}handleGoogleCallback(i){this.ngZone.run(()=>{i.credential&&this.processGoogleToken(i.credential)})}passwordMatchValidator(i){let r=i.get("password"),e=i.get("confirmPassword");return r&&e&&r.value!==e.value?{passwordMismatch:!0}:null}togglePassword(){this.showPassword.update(i=>!i)}toggleConfirmPassword(){this.showConfirmPassword.update(i=>!i)}onSubmit(){if(this.registerForm.invalid){Object.keys(this.registerForm.controls).forEach(d=>{this.registerForm.get(d)?.markAsTouched()});return}this.isLoading.set(!0);let{fullName:i,email:r,phone:e,password:s,confirmPassword:g}=this.registerForm.value;this.authService.register({fullName:i,email:r,phone:e,password:s,confirmPassword:g}).subscribe({next:()=>{this.isLoading.set(!1),this.toastr.success("Registration successful! Please login."),this.router.navigate(["/auth/login"])},error:d=>{this.isLoading.set(!1),this.toastr.error(d.error?.messageEn||"Registration failed")}})}loginWithGoogle(){if(typeof google>"u"||!google.accounts){this.toastr.error("Google Sign-In is not available. Please refresh the page.");return}google.accounts.id.prompt(i=>{(i.isNotDisplayed()||i.isSkippedMoment())&&this.openGoogleSignInPopup()})}openGoogleSignInPopup(){let e=window.screenX+(window.outerWidth-500)/2,s=window.screenY+(window.outerHeight-600)/2,g=window.open(`https://accounts.google.com/o/oauth2/v2/auth?client_id=${k.googleClientId}&redirect_uri=${window.location.origin}/auth/google/callback&response_type=token%20id_token&scope=email%20profile%20openid&nonce=${Math.random().toString(36).substring(7)}`,"GoogleSignIn",`width=500,height=600,left=${e},top=${s}`),d=setInterval(()=>{try{if(g?.closed)clearInterval(d);else if(g?.location?.hash){let u=g.location.hash.substring(1),p=new URLSearchParams(u).get("id_token");p&&(clearInterval(d),g.close(),this.processGoogleToken(p))}}catch{}},500);setTimeout(()=>clearInterval(d),12e4)}processGoogleToken(i){this.googleLoading.set(!0),this.isLoading.set(!0),this.authService.googleLogin(i).subscribe({next:r=>{if(this.googleLoading.set(!1),this.isLoading.set(!1),r.isSuccess&&r.user&&r.token){let e=r.user.role;this.toastr.success("Successfully signed in with Google!"),setTimeout(()=>{e==="Admin"?this.router.navigate(["/admin/dashboard"]):e==="Instructor"?this.router.navigate(["/instructor/dashboard"]):this.router.navigate(["/student/dashboard"])},100)}else this.toastr.error(r.message||"Google sign-in failed")},error:r=>{this.googleLoading.set(!1),this.isLoading.set(!1),this.toastr.error(r.error?.message||"Google sign-in failed")}})}static \u0275fac=function(r){return new(r||a)};static \u0275cmp=x({type:a,selectors:[["app-register"]],standalone:!0,features:[T],decls:86,vars:19,consts:[[1,"auth-page"],[1,"auth-container"],[1,"auth-card"],[1,"auth-header"],["routerLink","/",1,"auth-logo"],[1,"logo-text"],[1,"highlight"],[1,"auth-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","fullName"],[1,"input-wrapper"],[1,"material-icons"],["type","text","id","fullName","formControlName","fullName","placeholder","Enter your full name"],[1,"error-text"],["for","email"],["type","email","id","email","formControlName","email","placeholder","Enter your email"],["for","phone"],["type","tel","id","phone","formControlName","phone","placeholder","Enter your phone number"],["for","password"],["id","password","formControlName","password","placeholder","Enter your password",3,"type"],["type","button",1,"toggle-password",3,"click"],["for","confirmPassword"],["id","confirmPassword","formControlName","confirmPassword","placeholder","Confirm your password",3,"type"],["type","submit",1,"btn","btn-primary","btn-lg","btn-block",3,"disabled"],[1,"spinner"],[1,"auth-divider"],["type","button",1,"btn","btn-google",3,"click"],["viewBox","0 0 24 24","width","20","height","20"],["fill","#4285F4","d","M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"],["fill","#34A853","d","M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"],["fill","#FBBC05","d","M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"],["fill","#EA4335","d","M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"],[1,"auth-footer"],["routerLink","/",1,"home-link"],[1,"signup-link"],["routerLink","/auth/login"],[1,"auth-background"],[1,"background-content"]],template:function(r,e){if(r&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4)(5,"span",5),o(6,"Tech"),n(7,"span",6),o(8,"Master"),t()()(),n(9,"h1"),o(10,"Create Account"),t(),n(11,"p"),o(12,"Start your learning journey today"),t()(),n(13,"form",7),M("ngSubmit",function(){return e.onSubmit()}),n(14,"div",8)(15,"label",9),o(16,"Full Name"),t(),n(17,"div",10)(18,"span",11),o(19,"person"),t(),m(20,"input",12),t(),f(21,W,2,0,"span",13),t(),n(22,"div",8)(23,"label",14),o(24,"Email"),t(),n(25,"div",10)(26,"span",11),o(27,"email"),t(),m(28,"input",15),t(),f(29,Z,2,0,"span",13),t(),n(30,"div",8)(31,"label",16),o(32,"Phone "),t(),n(33,"div",10)(34,"span",11),o(35,"phone"),t(),m(36,"input",17),t()(),n(37,"div",8)(38,"label",18),o(39,"Password"),t(),n(40,"div",10)(41,"span",11),o(42,"lock"),t(),m(43,"input",19),n(44,"button",20),M("click",function(){return e.togglePassword()}),n(45,"span",11),o(46),t()()(),f(47,J,2,0,"span",13),t(),n(48,"div",8)(49,"label",21),o(50,"Confirm Password"),t(),n(51,"div",10)(52,"span",11),o(53,"lock"),t(),m(54,"input",22),n(55,"button",20),M("click",function(){return e.toggleConfirmPassword()}),n(56,"span",11),o(57),t()()(),f(58,U,2,0,"span",13),t(),n(59,"button",23),f(60,X,1,0,"span",24)(61,Y,1,0),t()(),n(62,"div",25)(63,"span"),o(64,"or"),t()(),n(65,"button",26),M("click",function(){return e.loginWithGoogle()}),E(),n(66,"svg",27),m(67,"path",28)(68,"path",29)(69,"path",30)(70,"path",31),t(),o(71," Continue with Google "),t(),F(),n(72,"div",32)(73,"a",33),o(74,"\u2190 Back to Home"),t(),n(75,"div",34)(76,"span"),o(77,"Already have an account?"),t(),n(78,"a",35),o(79,"Sign In"),t()()()()(),n(80,"div",36)(81,"div",37)(82,"h2"),o(83,"Join TechMaster"),t(),n(84,"p"),o(85,"Start your journey to becoming a tech expert"),t()()()()),r&2){let s,g,d,u,v,p,O,S;l(13),w("formGroup",e.registerForm),l(7),b("error",((s=e.registerForm.get("fullName"))==null?null:s.invalid)&&((s=e.registerForm.get("fullName"))==null?null:s.touched)),l(),_((g=e.registerForm.get("fullName"))!=null&&g.invalid&&((g=e.registerForm.get("fullName"))!=null&&g.touched)?21:-1),l(7),b("error",((d=e.registerForm.get("email"))==null?null:d.invalid)&&((d=e.registerForm.get("email"))==null?null:d.touched)),l(),_((u=e.registerForm.get("email"))!=null&&u.invalid&&((u=e.registerForm.get("email"))!=null&&u.touched)?29:-1),l(14),b("error",((v=e.registerForm.get("password"))==null?null:v.invalid)&&((v=e.registerForm.get("password"))==null?null:v.touched)),w("type",e.showPassword()?"text":"password"),l(3),y(e.showPassword()?"visibility_off":"visibility"),l(),_((p=e.registerForm.get("password"))!=null&&p.invalid&&((p=e.registerForm.get("password"))!=null&&p.touched)?47:-1),l(7),b("error",((O=e.registerForm.get("confirmPassword"))==null?null:O.invalid)&&((O=e.registerForm.get("confirmPassword"))==null?null:O.touched)),w("type",e.showConfirmPassword()?"text":"password"),l(3),y(e.showConfirmPassword()?"visibility_off":"visibility"),l(),_((S=e.registerForm.get("confirmPassword"))!=null&&S.touched&&(e.registerForm.errors!=null&&e.registerForm.errors.passwordMismatch)?58:-1),l(),w("disabled",e.isLoading()),l(),_(e.isLoading()?60:61)}},dependencies:[L,I,D,$,A,V,j,q,H],styles:['.auth-page[_ngcontent-%COMP%]{min-height:100vh;display:flex}.auth-container[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:2rem;background:var(--color-white);overflow-y:auto}.auth-card[_ngcontent-%COMP%]{width:100%;max-width:420px;padding:1rem 0}.auth-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}.auth-logo[_ngcontent-%COMP%]{display:inline-block;margin-bottom:1rem;text-decoration:none}.logo-text[_ngcontent-%COMP%]{font-size:2rem;font-weight:800;color:var(--color-dark)}.logo-text[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{color:var(--color-primary)}.auth-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:var(--color-dark);margin-bottom:.5rem}.auth-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--color-gray-600)}.auth-form[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:500;margin-bottom:.5rem;color:var(--color-dark);font-size:.875rem}.input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.input-wrapper[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{position:absolute;left:1rem;color:var(--color-gray-400);font-size:1.25rem}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem .75rem 3rem;border:2px solid var(--color-gray-200);border-radius:10px;font-size:1rem;transition:all .3s ease}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:var(--color-primary);outline:none;box-shadow:0 0 0 3px #2470901a}.input-wrapper[_ngcontent-%COMP%]   input.error[_ngcontent-%COMP%]{border-color:#ef4444}.toggle-password[_ngcontent-%COMP%]{position:absolute;right:1rem;background:none;border:none;cursor:pointer;color:var(--color-gray-400);padding:0}.toggle-password[_ngcontent-%COMP%]:hover{color:var(--color-gray-600)}.error-text[_ngcontent-%COMP%]{display:block;margin-top:.5rem;font-size:.75rem;color:#ef4444}.btn-block[_ngcontent-%COMP%]{width:100%;margin-top:.5rem}.spinner[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.auth-divider[_ngcontent-%COMP%]{display:flex;align-items:center;margin:1.5rem 0}.auth-divider[_ngcontent-%COMP%]:before, .auth-divider[_ngcontent-%COMP%]:after{content:"";flex:1;height:1px;background:var(--color-gray-200)}.auth-divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 1rem;color:var(--color-gray-500);font-size:.875rem}.btn-google[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;gap:.75rem;padding:.75rem;background:var(--color-white);border:2px solid var(--color-gray-200);border-radius:10px;font-size:1rem;font-weight:500;color:var(--color-dark);cursor:pointer;transition:all .3s ease}.btn-google[_ngcontent-%COMP%]:hover{background:var(--color-gray-50);border-color:var(--color-gray-300)}.auth-footer[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem;font-size:.875rem;color:var(--color-gray-600)}.home-link[_ngcontent-%COMP%]{display:block;color:var(--color-primary);font-weight:600;text-decoration:none;margin-bottom:1rem}.home-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.signup-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--color-primary);font-weight:600;text-decoration:none;margin-left:.25rem}.signup-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.auth-background[_ngcontent-%COMP%]{flex:1;display:none;background:linear-gradient(135deg,var(--color-primary) 0%,#1d5a73 50%,var(--color-dark) 100%);position:relative;overflow:hidden}.background-content[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;color:var(--color-white);text-align:center;padding:2rem}.background-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:800;margin-bottom:1rem}.background-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.25rem;opacity:.9}@media (min-width: 1024px){.auth-background[_ngcontent-%COMP%]{display:block}}[dir=rtl][_nghost-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{left:auto;right:1rem}[dir=rtl][_nghost-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.75rem 3rem .75rem 1rem}[dir=rtl][_nghost-%COMP%]   .toggle-password[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .toggle-password[_ngcontent-%COMP%]{right:auto;left:1rem}[dir=rtl][_nghost-%COMP%]   .auth-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .auth-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-left:0;margin-right:.25rem}']})}return a})();export{se as RegisterComponent};
