import{a as L}from"./chunk-SWJOSVLM.js";import{a as D}from"./chunk-QFQZ7TF5.js";import"./chunk-XAZLOLJU.js";import"./chunk-JLLNXAHD.js";import{d as R}from"./chunk-SAC5YDHM.js";import"./chunk-AJDLSE77.js";import"./chunk-L2ZR2CCC.js";import{$a as m,Ab as a,Bb as f,Jb as T,Na as c,W as x,Wa as h,Y as O,a as g,b as _,cb as P,eb as y,fb as S,ga as C,gb as p,ha as b,jb as N,kb as I,lb as n,mb as i,mc as A,nb as E,qb as v,sb as k,tb as d}from"./chunk-Q5RFH5SI.js";var $=(e,l)=>l.id;function z(e,l){if(e&1){let t=v();n(0,"button",9),k("click",function(){C(t);let r=d();return b(r.markAllAsRead())}),n(1,"span",10),a(2,"done_all"),i(),a(3," Mark All as Read "),i()}}function V(e,l){e&1&&(n(0,"div",6),E(1,"div",11),n(2,"p"),a(3,"Loading notifications..."),i()())}function F(e,l){e&1&&(n(0,"div",7)(1,"span",12),a(2,"\u{1F514}"),i(),n(3,"h3"),a(4,"No Notifications"),i(),n(5,"p"),a(6,"You're all caught up! Check back later for updates."),i()())}function j(e,l){if(e&1&&(n(0,"a",18)(1,"span",10),a(2,"arrow_forward"),i()()),e&2){let t=d().$implicit;P("routerLink",t.link)}}function J(e,l){if(e&1){let t=v();n(0,"div",14),k("click",function(){let r=C(t).$implicit,s=d(2);return b(s.markAsRead(r))}),n(1,"div",15)(2,"span",10),a(3),i()(),n(4,"div",16)(5,"h4"),a(6),i(),n(7,"p"),a(8),i(),n(9,"span",17),a(10),i()(),m(11,j,3,1,"a",18),i()}if(e&2){let t=l.$implicit,o=d(2);y("unread",!t.isRead),c(),S(o.getNotificationIconClass(t.type)),c(2),f(o.getNotificationIcon(t.type)),c(3),f(t.title),c(2),f(t.message),c(2),f(o.formatTime(t.createdAt)),c(),p(t.link?11:-1)}}function Y(e,l){if(e&1&&(n(0,"div",8),N(1,J,12,9,"div",13,$),i()),e&2){let t=d();c(),I(t.notifications())}}var W=(()=>{class e{instructorService=x(L);toastr=x(D);notifications=h([]);loading=h(!0);ngOnInit(){this.loadNotifications()}loadNotifications(){this.loading.set(!0),this.instructorService.getNotifications(50).subscribe({next:t=>{this.notifications.set(t),this.loading.set(!1)},error:()=>{this.loading.set(!1)}})}markAsRead(t){t.isRead||this.instructorService.markNotificationAsRead(t.id).subscribe({next:o=>{o&&this.notifications.update(r=>r.map(s=>s.id===t.id?_(g({},s),{isRead:!0}):s))}})}markAllAsRead(){this.instructorService.markAllNotificationsAsRead().subscribe({next:t=>{t&&(this.notifications.update(o=>o.map(r=>_(g({},r),{isRead:!0}))),this.toastr.success("All notifications marked as read"))}})}getNotificationIcon(t){switch(t?.toLowerCase()){case"enrollment":return"person_add";case"review":return"star";case"message":return"chat";case"payment":return"payments";default:return"notifications"}}getNotificationIconClass(t){switch(t?.toLowerCase()){case"enrollment":return"enrollment";case"review":return"review";case"message":return"message";default:return"system"}}formatTime(t){let o=new Date(t),s=new Date().getTime()-o.getTime(),u=Math.floor(s/6e4),M=Math.floor(s/36e5),w=Math.floor(s/864e5);return u<1?"Just now":u<60?`${u}m ago`:M<24?`${M}h ago`:w<7?`${w}d ago`:o.toLocaleDateString()}static \u0275fac=function(o){return new(o||e)};static \u0275cmp=O({type:e,selectors:[["app-instructor-notifications"]],standalone:!0,features:[T],decls:12,vars:2,consts:[[1,"notifications-page"],[1,"page-header"],[1,"header-left"],[1,"subtitle"],[1,"header-actions"],[1,"mark-all-btn"],[1,"loading-state"],[1,"empty-state"],[1,"notifications-list"],[1,"mark-all-btn",3,"click"],[1,"material-icons"],[1,"spinner"],[1,"empty-icon"],[1,"notification-item",3,"unread"],[1,"notification-item",3,"click"],[1,"notification-icon"],[1,"notification-content"],[1,"notification-time"],[1,"notification-action",3,"routerLink"]],template:function(o,r){o&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),a(4,"Notifications"),i(),n(5,"p",3),a(6,"Stay updated with your course activities"),i()(),n(7,"div",4),m(8,z,4,0,"button",5),i()(),m(9,V,4,0,"div",6)(10,F,7,0,"div",7)(11,Y,3,0,"div",8),i()),o&2&&(c(8),p(r.notifications().length>0?8:-1),c(),p(r.loading()?9:r.notifications().length===0?10:11))},dependencies:[A,R],styles:[".notifications-page[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:#1e293b;margin-bottom:.5rem}.subtitle[_ngcontent-%COMP%]{color:#64748b;font-size:.95rem}.mark-all-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 16px;background:#3b82f6;color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:500;transition:background .2s}.mark-all-btn[_ngcontent-%COMP%]:hover{background:#2563eb}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;background:#fff;border-radius:12px}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;display:block;margin-bottom:1rem}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid #e2e8f0;border-top-color:#3b82f6;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.notifications-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.notification-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:16px;padding:16px 20px;background:#fff;border-radius:12px;cursor:pointer;transition:all .2s;border-left:4px solid transparent}.notification-item[_ngcontent-%COMP%]:hover{transform:translate(4px);box-shadow:0 4px 12px #00000014}.notification-item.unread[_ngcontent-%COMP%]{border-left-color:#3b82f6;background:linear-gradient(135deg,#eff6ff,#fff 50%)}.notification-icon[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.notification-icon.enrollment[_ngcontent-%COMP%]{background:#dcfce7;color:#16a34a}.notification-icon.review[_ngcontent-%COMP%]{background:#fef3c7;color:#d97706}.notification-icon.message[_ngcontent-%COMP%]{background:#dbeafe;color:#2563eb}.notification-icon.system[_ngcontent-%COMP%]{background:#f1f5f9;color:#64748b}.notification-content[_ngcontent-%COMP%]{flex:1;min-width:0}.notification-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#1e293b;margin-bottom:4px}.notification-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:.9rem;margin-bottom:8px;line-height:1.4}.notification-time[_ngcontent-%COMP%]{font-size:.8rem;color:#94a3b8}.notification-action[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;background:#f1f5f9;display:flex;align-items:center;justify-content:center;color:#64748b;transition:all .2s}.notification-action[_ngcontent-%COMP%]:hover{background:#3b82f6;color:#fff}"]})}return e})();export{W as InstructorNotificationsComponent};
