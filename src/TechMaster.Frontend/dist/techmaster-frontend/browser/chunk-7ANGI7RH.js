import{a as te}from"./chunk-SWJOSVLM.js";import{b as A,d as B,e as q,f as j,g as R,h as Y,i as G,j as J,m as Z,n as H,o as K,p as Q,q as X,r as $,t as ee}from"./chunk-HRUO5R4Q.js";import{a as N}from"./chunk-QFQZ7TF5.js";import"./chunk-XAZLOLJU.js";import"./chunk-JLLNXAHD.js";import"./chunk-AJDLSE77.js";import"./chunk-L2ZR2CCC.js";import{$a as h,Ab as o,Bb as _,Cb as g,Fb as f,Gb as x,Hb as C,Ja as E,Jb as W,Mb as D,Na as s,Ob as T,W as k,Wa as b,Y as V,cb as S,eb as M,fb as I,ga as m,gb as v,ha as p,ic as U,jb as w,kb as y,lb as i,mb as t,mc as F,nb as z,qb as P,sb as u,tb as c}from"./chunk-Q5RFH5SI.js";var ne=(l,d)=>d.id,ie=(l,d)=>d.value;function oe(l,d){l&1&&(i(0,"div",13),z(1,"div",16),t())}function ae(l,d){if(l&1&&(i(0,"p",26),o(1),t()),l&2){let e=c().$implicit;s(),_(e.description)}}function re(l,d){if(l&1){let e=P();i(0,"a",28)(1,"span",5),o(2,"play_circle"),t(),o(3," Join Session "),t(),i(4,"button",29),u("click",function(){m(e);let n=c().$implicit,r=c(2);return p(r.copyLink(n.streamUrl))}),i(5,"span",5),o(6,"link"),t(),o(7," Copy Link "),t(),i(8,"button",29),u("click",function(){m(e);let n=c().$implicit,r=c(2);return p(r.editSession(n))}),i(9,"span",5),o(10,"edit"),t()(),i(11,"button",30),u("click",function(){m(e);let n=c().$implicit,r=c(2);return p(r.deleteSession(n))}),i(12,"span",5),o(13,"delete"),t()()}if(l&2){let e=c().$implicit;S("href",e.streamUrl,E)}}function se(l,d){if(l&1&&(i(0,"a",31)(1,"span",5),o(2,"play_circle"),t(),o(3," View Recording "),t()),l&2){let e=c(2).$implicit;S("href",e.recordingUrl,E)}}function le(l,d){if(l&1&&h(0,se,4,1,"a",31),l&2){let e=c().$implicit;v(e.recordingUrl?0:-1)}}function ce(l,d){if(l&1&&(i(0,"div",17)(1,"div",19)(2,"div",20)(3,"span",5),o(4),t(),o(5),t(),i(6,"span",21),o(7),t()(),i(8,"h3",22),o(9),t(),i(10,"p",23),o(11),t(),i(12,"div",24)(13,"div",25)(14,"span",5),o(15,"calendar_today"),t(),o(16),D(17,"date"),t(),i(18,"div",25)(19,"span",5),o(20,"schedule"),t(),o(21),D(22,"date"),t(),i(23,"div",25)(24,"span",5),o(25,"timer"),t(),o(26),t()(),h(27,ae,2,1,"p",26),i(28,"div",27),h(29,re,14,1)(30,le,1,1),t()()),l&2){let e=d.$implicit,a=c(2);s(2),I(e.platform),s(2),_(a.getPlatformIcon(e.platform)),s(),g(" ",a.getPlatformName(e.platform)," "),s(),I(a.getSessionStatus(e)),s(),g(" ",a.getSessionStatus(e)," "),s(2),_(e.title),s(2),_(e.courseName),s(5),g(" ",T(17,14,e.scheduledAt,"MMM d, y")," "),s(5),g(" ",T(22,17,e.scheduledAt,"h:mm a")," "),s(5),g(" ",e.durationMinutes," min "),s(),v(e.description?27:-1),s(2),v(a.activeTab==="upcoming"?29:30)}}function de(l,d){if(l&1&&(i(0,"div",18)(1,"span",32),o(2,"\u{1F4C5}"),t(),i(3,"h3"),o(4),t(),i(5,"p"),o(6),t()()),l&2){let e=c(2);s(4),g("No ",e.activeTab==="upcoming"?"upcoming":"past"," sessions"),s(2),_(e.activeTab==="upcoming"?"Schedule a live session to get started":"Completed sessions will appear here")}}function me(l,d){if(l&1&&(i(0,"div",14),w(1,ce,31,20,"div",17,ne,!1,de,7,2,"div",18),t()),l&2){let e=c();s(),y(e.activeTab==="upcoming"?e.upcomingSessions():e.pastSessions())}}function pe(l,d){if(l&1&&(i(0,"option",42),o(1),t()),l&2){let e=d.$implicit;S("value",e.id),s(),_(e.nameEn)}}function ue(l,d){if(l&1){let e=P();i(0,"label",55)(1,"input",56),C("ngModelChange",function(n){m(e);let r=c(2);return x(r.formData.platform,n)||(r.formData.platform=n),p(n)}),t(),i(2,"span",5),o(3),t(),o(4),t()}if(l&2){let e=d.$implicit,a=c(2);M("selected",a.formData.platform===e.value),s(),f("ngModel",a.formData.platform),S("value",e.value),s(2),_(e.icon),s(),g(" ",e.label," ")}}function ge(l,d){if(l&1){let e=P();i(0,"div",33),u("click",function(){m(e);let n=c();return p(n.closeModal())}),i(1,"div",34),u("click",function(n){return m(e),p(n.stopPropagation())}),i(2,"div",35)(3,"h2"),o(4),t(),i(5,"button",36),u("click",function(){m(e);let n=c();return p(n.closeModal())}),i(6,"span",5),o(7,"close"),t()()(),i(8,"form",37),u("ngSubmit",function(){m(e);let n=c();return p(n.saveSession())}),i(9,"div",38)(10,"label"),o(11,"Session Title *"),t(),i(12,"input",39),C("ngModelChange",function(n){m(e);let r=c();return x(r.formData.title,n)||(r.formData.title=n),p(n)}),t()(),i(13,"div",38)(14,"label"),o(15,"Course *"),t(),i(16,"select",40),C("ngModelChange",function(n){m(e);let r=c();return x(r.formData.courseId,n)||(r.formData.courseId=n),p(n)}),i(17,"option",41),o(18,"Select a course"),t(),w(19,pe,2,2,"option",42,ne),t()(),i(21,"div",43)(22,"div",38)(23,"label"),o(24,"Date *"),t(),i(25,"input",44),C("ngModelChange",function(n){m(e);let r=c();return x(r.formData.date,n)||(r.formData.date=n),p(n)}),t()(),i(26,"div",38)(27,"label"),o(28,"Time *"),t(),i(29,"input",45),C("ngModelChange",function(n){m(e);let r=c();return x(r.formData.time,n)||(r.formData.time=n),p(n)}),t()(),i(30,"div",38)(31,"label"),o(32,"Duration (min) *"),t(),i(33,"input",46),C("ngModelChange",function(n){m(e);let r=c();return x(r.formData.durationMinutes,n)||(r.formData.durationMinutes=n),p(n)}),t()()(),i(34,"div",38)(35,"label"),o(36,"Platform *"),t(),i(37,"div",47),w(38,ue,5,6,"label",48,ie),t()(),i(40,"div",38)(41,"label"),o(42,"Stream URL *"),t(),i(43,"input",49),C("ngModelChange",function(n){m(e);let r=c();return x(r.formData.streamUrl,n)||(r.formData.streamUrl=n),p(n)}),t(),i(44,"span",50),o(45),t()(),i(46,"div",38)(47,"label"),o(48,"Description"),t(),i(49,"textarea",51),C("ngModelChange",function(n){m(e);let r=c();return x(r.formData.description,n)||(r.formData.description=n),p(n)}),t()(),i(50,"div",52)(51,"button",53),u("click",function(){m(e);let n=c();return p(n.closeModal())}),o(52,"Cancel"),t(),i(53,"button",54),o(54),t()()()()()}if(l&2){let e=c();s(4),g("",e.editingSession()?"Edit":"Schedule"," Live Session"),s(8),f("ngModel",e.formData.title),s(4),f("ngModel",e.formData.courseId),s(3),y(e.courses()),s(6),f("ngModel",e.formData.date),s(4),f("ngModel",e.formData.time),s(4),f("ngModel",e.formData.durationMinutes),s(5),y(e.platforms),s(5),f("ngModel",e.formData.streamUrl),s(2),g("Paste the link to your ",e.getPlatformName(e.formData.platform)," session"),s(4),f("ngModel",e.formData.description),s(4),S("disabled",e.saving()),s(),g(" ",e.saving()?"Saving...":e.editingSession()?"Update Session":"Schedule Session"," ")}}var we=(()=>{class l{instructorService=k(te);toastr=k(N);sessions=b([]);courses=b([]);loading=b(!0);showModal=b(!1);editingSession=b(null);saving=b(!1);activeTab="upcoming";platforms=[{value:"youtube",label:"YouTube",icon:"smart_display"},{value:"zoom",label:"Zoom",icon:"videocam"},{value:"teams",label:"Teams",icon:"groups"},{value:"meet",label:"Google Meet",icon:"video_call"},{value:"other",label:"Other",icon:"link"}];formData={title:"",courseId:"",date:"",time:"",durationMinutes:60,platform:"zoom",streamUrl:"",description:""};ngOnInit(){this.loadSessions(),this.loadCourses()}loadSessions(){this.loading.set(!0),this.instructorService.getLiveSessions().subscribe({next:e=>{this.sessions.set(e),this.loading.set(!1)},error:()=>this.loading.set(!1)})}loadCourses(){this.instructorService.getMyCourses().subscribe(e=>{this.courses.set(e)})}upcomingSessions(){let e=new Date;return this.sessions().filter(a=>new Date(a.scheduledAt)>e)}pastSessions(){let e=new Date;return this.sessions().filter(a=>new Date(a.scheduledAt)<=e)}getSessionStatus(e){let a=new Date,n=new Date(e.scheduledAt),r=new Date(n.getTime()+e.durationMinutes*6e4);return a>=n&&a<=r?"live":a<n?"upcoming":"completed"}getPlatformIcon(e){return this.platforms.find(a=>a.value===e)?.icon||"link"}getPlatformName(e){return this.platforms.find(a=>a.value===e)?.label||"Other"}showCreateModal(){this.editingSession.set(null),this.formData={title:"",courseId:"",date:"",time:"",durationMinutes:60,platform:"zoom",streamUrl:"",description:""},this.showModal.set(!0)}editSession(e){this.editingSession.set(e);let a=new Date(e.scheduledAt);this.formData={title:e.title,courseId:e.courseId,date:a.toISOString().split("T")[0],time:a.toTimeString().slice(0,5),durationMinutes:e.durationMinutes,platform:e.platform,streamUrl:e.streamUrl,description:e.description||""},this.showModal.set(!0)}closeModal(){this.showModal.set(!1)}saveSession(){let e=new Date(`${this.formData.date}T${this.formData.time}`).toISOString(),a={title:this.formData.title,courseId:this.formData.courseId,scheduledAt:e,durationMinutes:this.formData.durationMinutes,platform:this.formData.platform,streamUrl:this.formData.streamUrl,description:this.formData.description};this.saving.set(!0),(this.editingSession()?this.instructorService.updateLiveSession(this.editingSession().id,a):this.instructorService.createLiveSession(a)).subscribe({next:r=>{this.toastr.success(`Session ${this.editingSession()?"updated":"scheduled"} successfully`),this.editingSession()?this.sessions.update(O=>O.map(L=>L.id===r.id?r:L)):this.sessions.update(O=>[...O,r]),this.closeModal(),this.saving.set(!1)},error:()=>{this.toastr.error("Failed to save session"),this.saving.set(!1)}})}deleteSession(e){confirm("Are you sure you want to delete this session?")&&this.instructorService.deleteLiveSession(e.id).subscribe({next:a=>{a&&(this.sessions.update(n=>n.filter(r=>r.id!==e.id)),this.toastr.success("Session deleted"))}})}copyLink(e){navigator.clipboard.writeText(e),this.toastr.success("Link copied to clipboard")}static \u0275fac=function(a){return new(a||l)};static \u0275cmp=V({type:l,selectors:[["app-instructor-live-sessions"]],standalone:!0,features:[W],decls:36,vars:8,consts:[[1,"live-sessions-page"],[1,"page-header"],[1,"header-left"],[1,"subtitle"],[1,"create-btn",3,"click"],[1,"material-icons"],[1,"stats-grid"],[1,"stat-card"],[1,"stat-info"],[1,"stat-value"],[1,"stat-label"],[1,"tabs"],[3,"click"],[1,"loading-state"],[1,"sessions-list"],[1,"modal-overlay"],[1,"spinner"],[1,"session-card"],[1,"empty-state"],[1,"session-header"],[1,"platform-badge"],[1,"session-status"],[1,"session-title"],[1,"session-course"],[1,"session-details"],[1,"detail-item"],[1,"session-description"],[1,"session-actions"],["target","_blank",1,"action-btn","primary",3,"href"],[1,"action-btn",3,"click"],[1,"action-btn","danger",3,"click"],["target","_blank",1,"action-btn",3,"href"],[1,"empty-icon"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"session-form",3,"ngSubmit"],[1,"form-group"],["type","text","name","title","required","","placeholder","e.g., Introduction to JavaScript",3,"ngModelChange","ngModel"],["name","courseId","required","",3,"ngModelChange","ngModel"],["value",""],[3,"value"],[1,"form-row"],["type","date","name","date","required","",3,"ngModelChange","ngModel"],["type","time","name","time","required","",3,"ngModelChange","ngModel"],["type","number","name","duration","required","","min","15","max","480",3,"ngModelChange","ngModel"],[1,"platform-options"],[1,"platform-option",3,"selected"],["type","url","name","streamUrl","required","","placeholder","https://zoom.us/j/... or https://youtube.com/live/...",3,"ngModelChange","ngModel"],[1,"help-text"],["name","description","rows","3","placeholder","What will be covered in this session?",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","button",1,"cancel-btn",3,"click"],["type","submit",1,"submit-btn",3,"disabled"],[1,"platform-option"],["type","radio","name","platform",3,"ngModelChange","ngModel","value"]],template:function(a,n){a&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),o(4,"Live Sessions"),t(),i(5,"p",3),o(6,"Schedule and manage your live classes"),t()(),i(7,"button",4),u("click",function(){return n.showCreateModal()}),i(8,"span",5),o(9,"add"),t(),o(10," Schedule Session "),t()(),i(11,"div",6)(12,"div",7)(13,"span",5),o(14,"today"),t(),i(15,"div",8)(16,"span",9),o(17),t(),i(18,"span",10),o(19,"Upcoming"),t()()(),i(20,"div",7)(21,"span",5),o(22,"event_busy"),t(),i(23,"div",8)(24,"span",9),o(25),t(),i(26,"span",10),o(27,"Completed"),t()()()(),i(28,"div",11)(29,"button",12),u("click",function(){return n.activeTab="upcoming"}),o(30," Upcoming Sessions "),t(),i(31,"button",12),u("click",function(){return n.activeTab="past"}),o(32," Past Sessions "),t()(),h(33,oe,2,0,"div",13)(34,me,4,1,"div",14)(35,ge,55,11,"div",15),t()),a&2&&(s(17),_(n.upcomingSessions().length),s(8),_(n.pastSessions().length),s(4),M("active",n.activeTab==="upcoming"),s(2),M("active",n.activeTab==="past"),s(2),v(n.loading()?33:34),s(2),v(n.showModal()?35:-1))},dependencies:[F,U,ee,Y,H,K,A,G,Z,J,B,q,$,X,Q,R,j],styles:[".live-sessions-page[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:#1e293b;margin-bottom:.5rem}.subtitle[_ngcontent-%COMP%]{color:#64748b}.create-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 24px;background:linear-gradient(135deg,#10b981,#059669);color:#fff;border:none;border-radius:10px;font-weight:600;cursor:pointer;transition:transform .2s}.create-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.stats-grid[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:2rem}.stat-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;background:#fff;padding:20px 24px;border-radius:12px;flex:1}.stat-card[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:32px;color:#10b981}.stat-value[_ngcontent-%COMP%]{display:block;font-size:1.5rem;font-weight:700;color:#1e293b}.stat-label[_ngcontent-%COMP%]{font-size:.9rem;color:#64748b}.tabs[_ngcontent-%COMP%]{display:flex;gap:4px;background:#fff;padding:4px;border-radius:10px;margin-bottom:1.5rem;width:fit-content}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 24px;border:none;background:transparent;border-radius:8px;cursor:pointer;font-weight:500;color:#64748b;transition:all .2s}.tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#10b981;color:#fff}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem;background:#fff;border-radius:12px}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid #e2e8f0;border-top-color:#10b981;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;display:block;margin-bottom:1rem}.sessions-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:20px}.session-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:24px;transition:transform .2s,box-shadow .2s}.session-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 12px 24px #0000001a}.session-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.platform-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:6px 12px;border-radius:20px;font-size:.85rem;font-weight:600}.platform-badge.youtube[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626}.platform-badge.zoom[_ngcontent-%COMP%]{background:#dbeafe;color:#2563eb}.platform-badge.teams[_ngcontent-%COMP%]{background:#ede9fe;color:#7c3aed}.platform-badge.meet[_ngcontent-%COMP%]{background:#dcfce7;color:#16a34a}.platform-badge.other[_ngcontent-%COMP%]{background:#f1f5f9;color:#64748b}.session-status[_ngcontent-%COMP%]{font-size:.8rem;padding:4px 10px;border-radius:12px;font-weight:500}.session-status.live[_ngcontent-%COMP%]{background:#dcfce7;color:#16a34a}.session-status.upcoming[_ngcontent-%COMP%]{background:#dbeafe;color:#2563eb}.session-status.completed[_ngcontent-%COMP%]{background:#f1f5f9;color:#64748b}.session-title[_ngcontent-%COMP%]{font-size:1.15rem;font-weight:600;color:#1e293b;margin-bottom:4px}.session-course[_ngcontent-%COMP%]{font-size:.9rem;color:#64748b;margin-bottom:16px}.session-details[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;margin-bottom:12px}.detail-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:.9rem;color:#64748b}.detail-item[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:18px}.session-description[_ngcontent-%COMP%]{font-size:.9rem;color:#64748b;margin-bottom:16px;line-height:1.5}.session-actions[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.action-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 14px;border:1px solid #e2e8f0;border-radius:8px;background:#fff;color:#64748b;font-size:.9rem;cursor:pointer;text-decoration:none;transition:all .2s}.action-btn[_ngcontent-%COMP%]:hover{background:#f8fafc}.action-btn.primary[_ngcontent-%COMP%]{background:#10b981;color:#fff;border-color:#10b981}.action-btn.danger[_ngcontent-%COMP%]:hover{background:#fef2f2;color:#dc2626;border-color:#fecaca}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:16px;width:100%;max-width:600px;max-height:90vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #e2e8f0}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600}.close-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;color:#64748b}.session-form[_ngcontent-%COMP%]{padding:24px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:500;margin-bottom:8px;color:#374151}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #e2e8f0;border-radius:8px;font-size:1rem}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}.help-text[_ngcontent-%COMP%]{font-size:.85rem;color:#64748b;margin-top:6px;display:block}.platform-options[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}.platform-option[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:6px;padding:14px 12px;border:2px solid #e2e8f0;border-radius:10px;cursor:pointer;transition:all .2s;font-size:.85rem;color:#64748b}.platform-option[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.platform-option.selected[_ngcontent-%COMP%]{border-color:#10b981;background:#dcfce7;color:#059669}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:24px}.cancel-btn[_ngcontent-%COMP%], .submit-btn[_ngcontent-%COMP%]{padding:12px 24px;border-radius:8px;font-weight:600;cursor:pointer;border:none}.cancel-btn[_ngcontent-%COMP%]{background:#f1f5f9;color:#64748b}.submit-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff}.submit-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}"]})}return l})();export{we as InstructorLiveSessionsComponent};
