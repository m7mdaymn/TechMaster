import{a as $}from"./chunk-6FZDPKMQ.js";import{b as j,d as R,g as q,t as A}from"./chunk-HRUO5R4Q.js";import{a as W}from"./chunk-QFQZ7TF5.js";import"./chunk-XAZLOLJU.js";import"./chunk-JLLNXAHD.js";import{a as L,d as U}from"./chunk-SAC5YDHM.js";import"./chunk-AJDLSE77.js";import"./chunk-L2ZR2CCC.js";import{$a as c,Ab as s,Bb as g,Cb as x,Db as S,Fb as O,Gb as T,Hb as w,Jb as z,Mb as h,Na as r,Ob as M,W as C,Wa as f,Y as y,cb as E,eb as k,ga as u,gb as m,ha as _,ic as V,jb as I,kb as D,lb as i,mb as t,mc as B,nb as F,qb as P,sb as b,tb as d}from"./chunk-Q5RFH5SI.js";var G=(o,l)=>l.id;function N(o,l){o&1&&(i(0,"div",2),F(1,"div",4),t())}function Y(o,l){o&1&&(i(0,"span",22),s(1,"Required"),t())}function H(o,l){if(o&1&&(i(0,"span",32),s(1),t()),o&2){let e,n=d(2).$implicit,a=d(2);r(),S(" Graded: ",(e=a.getSubmission(n.id))==null?null:e.score,"/",n.maxPoints," ")}}function J(o,l){o&1&&(i(0,"span",33),s(1,"Submitted"),t())}function K(o,l){if(o&1&&c(0,H,2,2,"span",32)(1,J,2,0,"span",33),o&2){let e,n=d().$implicit,a=d(2);m(((e=a.getSubmission(n.id))==null?null:e.score)!==null&&((e=a.getSubmission(n.id))==null?null:e.score)!==void 0?0:1)}}function Q(o,l){o&1&&(i(0,"span",24),s(1,"Overdue"),t())}function X(o,l){o&1&&(i(0,"span",25),s(1,"Pending"),t())}function Z(o,l){o&1&&(i(0,"span",35),s(1,"(Overdue)"),t())}function ee(o,l){if(o&1&&(i(0,"div",34)(1,"span",9),s(2,"\u{1F4C5}"),t(),i(3,"span"),s(4),h(5,"date"),t(),c(6,Z,2,0,"span",35),t()),o&2){let e=d().$implicit,n=d(2);k("overdue",n.isOverdue(e)),r(4),x("Due: ",M(5,4,e.dueDate,"medium"),""),r(2),m(n.isOverdue(e)?6:-1)}}function te(o,l){o&1&&(i(0,"span",36),s(1,"Late Submission"),t())}function ne(o,l){if(o&1&&(i(0,"div",37)(1,"h5"),s(2,"Instructor Feedback:"),t(),i(3,"p"),s(4),t()()),o&2){let e,n=d(2).$implicit,a=d(2);r(4),g((e=a.getSubmission(n.id))==null?null:e.feedback)}}function ie(o,l){if(o&1&&(i(0,"div",30)(1,"p")(2,"strong"),s(3,"Submitted:"),t(),s(4),h(5,"date"),t(),c(6,te,2,0,"span",36)(7,ne,5,1,"div",37),t()),o&2){let e,n,a,p=d().$implicit,v=d(2);r(4),x(" ",M(5,3,(e=v.getSubmission(p.id))==null?null:e.submittedAt,"medium"),""),r(2),m((n=v.getSubmission(p.id))!=null&&n.isLate?6:-1),r(),m((a=v.getSubmission(p.id))!=null&&a.feedback?7:-1)}}function oe(o,l){if(o&1){let e=P();i(0,"button",38),b("click",function(){u(e);let a=d().$implicit,p=d(2);return _(p.openSubmitModal(a))}),s(1," Submit Work "),t()}}function se(o,l){if(o&1&&(i(0,"div",16)(1,"div",17)(2,"div",18)(3,"h3"),s(4),t(),i(5,"div",19)(6,"span",20),s(7),t(),i(8,"span",21),s(9),t(),c(10,Y,2,0,"span",22),t()(),i(11,"div",23),c(12,K,2,1)(13,Q,2,0,"span",24)(14,X,2,0,"span",25),t()(),i(15,"div",26)(16,"div",27)(17,"h4"),s(18,"Instructions"),t(),i(19,"p"),s(20),t()(),c(21,ee,7,7,"div",28),t(),i(22,"div",29),c(23,ie,8,6,"div",30)(24,oe,2,0,"button",31),t()()),o&2){let e=l.$implicit,n=d(2);k("submitted",n.isTaskSubmitted(e.id))("overdue",n.isOverdue(e)),r(4),g(e.nameEn),r(3),g(e.taskType),r(2),x("",e.maxPoints," points"),r(),m(e.isRequired?10:-1),r(2),m(n.isTaskSubmitted(e.id)?12:n.isOverdue(e)?13:14),r(8),g(e.instructions),r(),m(e.dueDate?21:-1),r(2),m(n.isTaskSubmitted(e.id)?23:24)}}function ae(o,l){o&1&&(i(0,"div",15)(1,"span",9),s(2,"\u{1F4CB}"),t(),i(3,"h3"),s(4,"No Tasks Yet"),t(),i(5,"p"),s(6,"Tasks will appear here when your instructor assigns them."),t()())}function re(o,l){if(o&1&&(i(0,"div",5)(1,"h1"),s(2),t(),i(3,"p",6),s(4,"Complete your tasks and submit your work on time"),t()(),i(5,"div",7)(6,"div",8)(7,"span",9),s(8,"\u{1F4CB}"),t(),i(9,"div",10)(10,"span",11),s(11),t(),i(12,"span",12),s(13,"Total Tasks"),t()()(),i(14,"div",8)(15,"span",9),s(16,"\u2705"),t(),i(17,"div",10)(18,"span",11),s(19),t(),i(20,"span",12),s(21,"Submitted"),t()()(),i(22,"div",8)(23,"span",9),s(24,"\u23F3"),t(),i(25,"div",10)(26,"span",11),s(27),t(),i(28,"span",12),s(29,"Pending"),t()()(),i(30,"div",8)(31,"span",9),s(32,"\u2B50"),t(),i(33,"div",10)(34,"span",11),s(35),t(),i(36,"span",12),s(37,"Points Earned"),t()()()(),i(38,"div",13),I(39,se,25,12,"div",14,G,!1,ae,7,0,"div",15),t()),o&2){let e,n=d();r(2),g(((e=n.internship())==null?null:e.nameEn)||"Internship Tasks"),r(9),g(n.tasks().length),r(8),g(n.submittedCount),r(8),g(n.pendingCount),r(8),S("",n.totalScore,"/",n.totalMaxPoints,""),r(4),D(n.tasks())}}function de(o,l){o&1&&(i(0,"span",52),s(1,"\u26A0\uFE0F This submission will be marked as late"),t())}function le(o,l){if(o&1&&(i(0,"p")(1,"strong"),s(2,"Due:"),t(),s(3),h(4,"date"),c(5,de,2,0,"span",52),t()),o&2){let e=d(2);k("overdue",e.isOverdue(e.selectedTask)),r(3),x(" ",M(4,4,e.selectedTask.dueDate,"medium")," "),r(2),m(e.isOverdue(e.selectedTask)?5:-1)}}function me(o,l){if(o&1){let e=P();i(0,"div",39),b("click",function(){u(e);let a=d();return _(a.closeSubmitModal())}),i(1,"div",40),b("click",function(a){return u(e),_(a.stopPropagation())}),i(2,"div",41)(3,"h2"),s(4),t(),i(5,"button",42),b("click",function(){u(e);let a=d();return _(a.closeSubmitModal())}),s(6,"\xD7"),t()(),i(7,"div",43)(8,"div",44)(9,"p")(10,"strong"),s(11,"Max Points:"),t(),s(12),t(),c(13,le,6,7,"p",45),t(),i(14,"div",46)(15,"label"),s(16,"Submission Text"),t(),i(17,"textarea",47),w("ngModelChange",function(a){u(e);let p=d();return T(p.submission.submissionText,a)||(p.submission.submissionText=a),_(a)}),t()(),i(18,"div",46)(19,"label"),s(20,"Submission URL (Optional)"),t(),i(21,"input",48),w("ngModelChange",function(a){u(e);let p=d();return T(p.submission.submissionUrl,a)||(p.submission.submissionUrl=a),_(a)}),t(),i(22,"small"),s(23,"Link to Google Drive, GitHub, or any file hosting service"),t()()(),i(24,"div",49)(25,"button",50),b("click",function(){u(e);let a=d();return _(a.closeSubmitModal())}),s(26,"Cancel"),t(),i(27,"button",51),b("click",function(){u(e);let a=d();return _(a.submitTask())}),s(28," Submit Work "),t()()()()}if(o&2){let e=d();r(4),x("Submit: ",e.selectedTask.nameEn,""),r(8),x(" ",e.selectedTask.maxPoints,""),r(),m(e.selectedTask.dueDate?13:-1),r(4),O("ngModel",e.submission.submissionText),r(4),O("ngModel",e.submission.submissionUrl),r(6),E("disabled",!e.canSubmit())}}var he=(()=>{class o{route=C(L);internshipService=C($);toastr=C(W);internship=f(null);tasks=f([]);submissions=f([]);loading=f(!1);showSubmitModal=!1;selectedTask=null;submission={submissionText:"",submissionUrl:""};get submittedCount(){return this.submissions().length}get pendingCount(){return this.tasks().length-this.submittedCount}get totalScore(){return this.submissions().reduce((e,n)=>e+(n.score||0),0)}get totalMaxPoints(){return this.tasks().reduce((e,n)=>e+n.maxPoints,0)}ngOnInit(){let e=this.route.snapshot.paramMap.get("internshipId");e&&this.loadData(e)}loadData(e){this.loading.set(!0),this.internshipService.getInternship(e).subscribe(n=>{this.internship.set(n)}),this.internshipService.getInternshipTasks(e).subscribe(n=>{this.tasks.set(n)}),this.internshipService.getMySubmissions(e).subscribe({next:n=>{this.submissions.set(n),this.loading.set(!1)},error:()=>{this.loading.set(!1)}})}isTaskSubmitted(e){return this.submissions().some(n=>n.taskId===e)}getSubmission(e){return this.submissions().find(n=>n.taskId===e)}isOverdue(e){return e.dueDate?new Date(e.dueDate)<new Date&&!this.isTaskSubmitted(e.id):!1}openSubmitModal(e){this.selectedTask=e,this.submission={submissionText:"",submissionUrl:""},this.showSubmitModal=!0}closeSubmitModal(){this.showSubmitModal=!1,this.selectedTask=null,this.submission={submissionText:"",submissionUrl:""}}canSubmit(){return!!(this.submission.submissionText||this.submission.submissionUrl)}submitTask(){!this.selectedTask||!this.canSubmit()||this.internshipService.submitTask(this.selectedTask.id,this.submission).subscribe({next:e=>{if(e){this.toastr.success("Task submitted successfully!");let n=this.route.snapshot.paramMap.get("internshipId");n&&this.internshipService.getMySubmissions(n).subscribe(a=>{this.submissions.set(a)}),this.closeSubmitModal()}else this.toastr.error("Failed to submit task")},error:()=>{this.toastr.error("Failed to submit task")}})}static \u0275fac=function(n){return new(n||o)};static \u0275cmp=y({type:o,selectors:[["app-internship-tasks"]],standalone:!0,features:[z],decls:6,vars:2,consts:[[1,"internship-tasks-page"],["routerLink","/student/my-internships",1,"back-link"],[1,"loading"],[1,"modal-overlay"],[1,"spinner"],[1,"page-header"],[1,"subtitle"],[1,"progress-summary"],[1,"progress-card"],[1,"icon"],[1,"info"],[1,"value"],[1,"label"],[1,"tasks-list"],[1,"task-card",3,"submitted","overdue"],[1,"empty-state"],[1,"task-card"],[1,"task-header"],[1,"task-info"],[1,"task-meta"],[1,"type-badge"],[1,"points"],[1,"required-badge"],[1,"task-status"],[1,"status-badge","overdue"],[1,"status-badge","pending"],[1,"task-body"],[1,"instructions"],[1,"due-date",3,"overdue"],[1,"task-footer"],[1,"submission-info"],[1,"submit-btn"],[1,"status-badge","graded"],[1,"status-badge","submitted"],[1,"due-date"],[1,"overdue-text"],[1,"late-badge"],[1,"feedback-section"],[1,"submit-btn",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"task-details"],[3,"overdue"],[1,"form-group"],["rows","6","placeholder","Enter your submission text, answer, or description of your work...",3,"ngModelChange","ngModel"],["type","url","placeholder","https://drive.google.com/... or link to your work",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"cancel-btn",3,"click"],[1,"submit-btn",3,"click","disabled"],[1,"late-warning"]],template:function(n,a){n&1&&(i(0,"div",0)(1,"a",1),s(2," \u2190 Back to My Internships "),t(),c(3,N,2,0,"div",2)(4,re,42,7),t(),c(5,me,29,6,"div",3)),n&2&&(r(3),m(a.loading()?3:4),r(2),m(a.showSubmitModal&&a.selectedTask?5:-1))},dependencies:[B,V,U,A,j,R,q],styles:[".internship-tasks-page[_ngcontent-%COMP%]{padding:2rem;max-width:1000px;margin:0 auto}.back-link[_ngcontent-%COMP%]{display:inline-block;color:#667eea;text-decoration:none;margin-bottom:1.5rem;font-weight:500}.back-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;margin-bottom:.5rem}.subtitle[_ngcontent-%COMP%]{color:#666}.loading[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:4rem}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid #f3f3f3;border-top:3px solid #247090;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.progress-summary[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:1rem;margin-bottom:2rem}.progress-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.25rem;display:flex;align-items:center;gap:1rem;box-shadow:0 2px 12px #0000000f}.progress-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:2rem}.progress-card[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;display:block}.progress-card[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.85rem;color:#666}.tasks-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.task-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 2px 12px #0000000f;overflow:hidden;border-left:4px solid #667eea}.task-card.submitted[_ngcontent-%COMP%]{border-left-color:#28a745}.task-card.overdue[_ngcontent-%COMP%]{border-left-color:#dc3545}.task-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;padding:1.25rem;border-bottom:1px solid #f0f0f0}.task-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;margin:0 0 .5rem}.task-meta[_ngcontent-%COMP%]{display:flex;gap:.75rem;flex-wrap:wrap}.type-badge[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0;padding:.25rem .75rem;border-radius:12px;font-size:.8rem;font-weight:500}.points[_ngcontent-%COMP%]{color:#666;font-size:.85rem}.required-badge[_ngcontent-%COMP%]{background:#fff3cd;color:#856404;padding:.25rem .5rem;border-radius:8px;font-size:.75rem;font-weight:600}.status-badge[_ngcontent-%COMP%]{padding:.375rem 1rem;border-radius:12px;font-size:.85rem;font-weight:600}.status-badge.pending[_ngcontent-%COMP%]{background:#e2e3e5;color:#383d41}.status-badge.submitted[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460}.status-badge.graded[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.status-badge.overdue[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.task-body[_ngcontent-%COMP%]{padding:1.25rem}.instructions[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;margin-bottom:.5rem;color:#333}.instructions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#555;line-height:1.6;white-space:pre-wrap}.due-date[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-top:1rem;padding:.75rem;background:#f8f9fa;border-radius:8px;font-size:.9rem}.due-date.overdue[_ngcontent-%COMP%]{background:#fff5f5;color:#dc3545}.overdue-text[_ngcontent-%COMP%]{font-weight:600}.task-footer[_ngcontent-%COMP%]{padding:1rem 1.25rem;background:#f8f9fa}.submit-btn[_ngcontent-%COMP%]{display:inline-block;padding:.75rem 2rem;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:transform .2s,box-shadow .2s}.submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #667eea66}.submit-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.submission-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.25rem 0;font-size:.9rem}.late-badge[_ngcontent-%COMP%]{display:inline-block;margin-top:.5rem;padding:.25rem .5rem;background:#f8d7da;color:#721c24;border-radius:8px;font-size:.75rem;font-weight:600}.feedback-section[_ngcontent-%COMP%]{margin-top:1rem;padding:1rem;background:#e8f5e9;border-radius:8px}.feedback-section[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:.9rem;color:#2e7d32}.feedback-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#1b5e20}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;background:#fff;border-radius:16px;box-shadow:0 2px 12px #0000000f}.empty-state[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:4rem;display:block;margin-bottom:1rem}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:16px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;border-bottom:1px solid #e0e0e0}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;margin:0}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:#666}.modal-body[_ngcontent-%COMP%]{padding:1.5rem}.task-details[_ngcontent-%COMP%]{background:#f8f9fa;padding:1rem;border-radius:8px;margin-bottom:1.5rem}.task-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.25rem 0}.task-details[_ngcontent-%COMP%]   .overdue[_ngcontent-%COMP%]{color:#dc3545}.late-warning[_ngcontent-%COMP%]{display:block;margin-top:.25rem;font-size:.85rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:.5rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:2px solid #e0e0e0;border-radius:8px;font-size:.95rem;transition:border-color .2s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.form-group[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;margin-top:.5rem;color:#666;font-size:.8rem}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem;padding:1.5rem;border-top:1px solid #e0e0e0}.cancel-btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:2px solid #e0e0e0;background:#fff;border-radius:8px;font-weight:600;cursor:pointer}@media (max-width: 768px){.internship-tasks-page[_ngcontent-%COMP%]{padding:1rem}.progress-summary[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.task-header[_ngcontent-%COMP%]{flex-direction:column;gap:.75rem}}@media (max-width: 480px){.progress-summary[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}return o})();export{he as InternshipTasksComponent};
