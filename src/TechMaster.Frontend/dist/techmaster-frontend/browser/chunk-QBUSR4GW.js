import{a as U}from"./chunk-SWJOSVLM.js";import{d as $,g as N,m as B,n as D,o as W,t as H}from"./chunk-HRUO5R4Q.js";import{a as j}from"./chunk-UYI4POZX.js";import"./chunk-JLLNXAHD.js";import"./chunk-L2ZR2CCC.js";import{$a as O,Ab as i,Bb as s,Cb as x,Db as k,Fb as A,Gb as T,Hb as R,Ja as P,Jb as z,Na as o,W as C,Wa as v,Y as M,cb as _,db as h,fb as S,gb as E,hb as I,jb as g,kb as u,lb as t,mb as n,mc as F,nb as f,sb as w,tb as m}from"./chunk-Q5RFH5SI.js";var b=(a,c)=>c.id,V=(a,c)=>c.moduleId;function Y(a,c){if(a&1&&(t(0,"option",6),i(1),n()),a&2){let e=c.$implicit;_("value",e.id),o(),s(e.nameEn)}}function q(a,c){if(a&1&&(t(0,"div",22)(1,"div",23),f(2,"img",24),t(3,"div",25)(4,"span",26),i(5),n(),t(6,"span",27),i(7),n()()(),t(8,"div",28)(9,"div",29)(10,"span",30),i(11),n(),t(12,"span",31),i(13,"Rating"),n()(),t(14,"div",29)(15,"span",30),i(16),n(),t(17,"span",31),i(18,"Completion"),n()()()()),a&2){let e=c.$implicit,r=m(2);o(2),_("src",r.mediaService.getCourseThumbnail(e.thumbnailUrl),P),o(3),s(e.nameEn),o(2),x("",e.enrollmentCount," students"),o(4),s(e.averageRating.toFixed(1)||"N/A"),o(5),x("",e.completionRate||0,"%")}}function G(a,c){if(a&1&&(t(0,"div",7)(1,"h2"),i(2,"Overall Performance"),n(),t(3,"div",10)(4,"div",11)(5,"div",12)(6,"span",13),i(7,"school"),n()(),t(8,"div",14)(9,"span",15),i(10),n(),t(11,"span",16),i(12,"Total Students"),n()()(),t(13,"div",17)(14,"div",12)(15,"span",13),i(16,"play_circle"),n()(),t(17,"div",14)(18,"span",15),i(19),n(),t(20,"span",16),i(21,"Active Courses"),n()()(),t(22,"div",18)(23,"div",12)(24,"span",13),i(25,"star"),n()(),t(26,"div",14)(27,"span",15),i(28),n(),t(29,"span",16),i(30,"Average Rating"),n()()(),t(31,"div",19)(32,"div",12)(33,"span",13),i(34,"trending_up"),n()(),t(35,"div",14)(36,"span",15),i(37),n(),t(38,"span",16),i(39,"Completion Rate"),n()()()(),t(40,"h2",20),i(41,"Top Performing Courses"),n(),t(42,"div",21),g(43,q,19,5,"div",22,b),n()()),a&2){let e=m();o(10),s(e.totalStudents()),o(9),s(e.courses().length),o(9),s(e.averageRating().toFixed(1)),o(9),x("",e.completionRate().toFixed(0),"%"),o(6),u(e.topCourses())}}function J(a,c){a&1&&(t(0,"div",8),f(1,"div",32),n())}function K(a,c){if(a&1&&(t(0,"div",37),f(1,"div",44),t(2,"span",45),i(3),n()()),a&2){let e=c.$implicit,r=m(2);o(),h("height",r.getBarHeight(e.count),"%"),o(2),s(e.month)}}function Q(a,c){if(a&1&&(t(0,"div",40)(1,"div",46)(2,"span",47),i(3),n(),t(4,"span",48),i(5),n()(),t(6,"div",49),f(7,"div",50),n(),t(8,"span",51),i(9),n()()),a&2){let e=c.$implicit,r=m(2);o(3),s(e.moduleName),o(2),k("",e.completedCount,"/",r.analytics().totalEnrollments," students"),o(2),h("width",e.completionRate,"%"),o(2),x("",e.completionRate.toFixed(0),"%")}}function X(a,c){if(a&1&&(t(0,"div",43)(1,"div",52)(2,"span",13),i(3),n()(),t(4,"div",53)(5,"span",54),i(6),n(),t(7,"span",55),i(8),n()()()),a&2){let e=c.$implicit,r=m(2);o(),S(e.type),o(2),s(r.getActivityIcon(e.type)),o(3),s(e.description),o(2),s(r.formatTime(e.timestamp))}}function Z(a,c){if(a&1&&(t(0,"div",9)(1,"div",10)(2,"div",33)(3,"span",13),i(4,"people"),n(),t(5,"div",14)(6,"span",15),i(7),n(),t(8,"span",16),i(9,"Total Enrollments"),n()()(),t(10,"div",33)(11,"span",13),i(12,"trending_up"),n(),t(13,"div",14)(14,"span",15),i(15),n(),t(16,"span",16),i(17,"Active Students"),n()()(),t(18,"div",33)(19,"span",13),i(20,"check_circle"),n(),t(21,"div",14)(22,"span",15),i(23),n(),t(24,"span",16),i(25,"Completion Rate"),n()()(),t(26,"div",33)(27,"span",13),i(28,"star"),n(),t(29,"div",14)(30,"span",15),i(31),n(),t(32,"span",16),i(33,"Average Rating"),n()()()(),t(34,"div",34)(35,"h3"),i(36,"Student Engagement Over Time"),n(),t(37,"div",35)(38,"div",36),g(39,K,4,3,"div",37,I),n()()(),t(41,"div",38)(42,"h3"),i(43,"Module Completion Progress"),n(),t(44,"div",39),g(45,Q,10,6,"div",40,V),n()(),t(47,"div",41)(48,"h3"),i(49,"Recent Student Activity"),n(),t(50,"div",42),g(51,X,9,5,"div",43,b),n()()()),a&2){let e=m();o(7),s(e.analytics().totalEnrollments),o(8),s(e.analytics().activeStudents),o(8),x("",e.analytics().completionRate.toFixed(0),"%"),o(8),s(e.analytics().averageRating.toFixed(1)),o(8),u(e.analytics().enrollmentTrend),o(6),u(e.analytics().moduleProgress),o(6),u(e.analytics().recentActivity)}}var le=(()=>{class a{instructorService=C(U);mediaService=C(j);courses=v([]);analytics=v(null);loading=v(!1);selectedCourseId="";ngOnInit(){this.loadCourses()}loadCourses(){this.instructorService.getMyCourses().subscribe(e=>{this.courses.set(e)})}loadCourseAnalytics(){if(!this.selectedCourseId){this.analytics.set(null);return}this.loading.set(!0),this.instructorService.getCourseAnalytics(this.selectedCourseId).subscribe({next:e=>{this.analytics.set(e),this.loading.set(!1)},error:()=>this.loading.set(!1)})}totalStudents(){return this.courses().reduce((e,r)=>e+(r.enrollmentCount||0),0)}averageRating(){let e=this.courses().filter(r=>r.averageRating);return e.length===0?0:e.reduce((r,l)=>r+(l.averageRating||0),0)/e.length}completionRate(){let e=this.courses().filter(r=>r.completionRate!==void 0);return e.length===0?0:e.reduce((r,l)=>r+(l.completionRate||0),0)/e.length}topCourses(){return[...this.courses()].sort((e,r)=>(r.enrollmentCount||0)-(e.enrollmentCount||0)).slice(0,5)}getBarHeight(e){let r=this.analytics()?.enrollmentTrend||[],l=Math.max(...r.map(d=>d.count),1);return e/l*100}getActivityIcon(e){switch(e){case"enrollment":return"person_add";case"completion":return"check_circle";case"review":return"star";default:return"info"}}formatTime(e){let r=new Date(e),d=new Date().getTime()-r.getTime(),p=Math.floor(d/6e4),y=Math.floor(d/36e5),L=Math.floor(d/864e5);return p<60?`${p}m ago`:y<24?`${y}h ago`:`${L}d ago`}static \u0275fac=function(r){return new(r||a)};static \u0275cmp=M({type:a,selectors:[["app-instructor-analytics"]],standalone:!0,features:[z],decls:15,vars:2,consts:[[1,"analytics-page"],[1,"page-header"],[1,"header-left"],[1,"subtitle"],[3,"ngModelChange","change","ngModel"],["value",""],[3,"value"],[1,"overview-section"],[1,"loading-state"],[1,"course-analytics"],[1,"stats-grid"],[1,"stat-card","primary"],[1,"stat-icon"],[1,"material-icons"],[1,"stat-info"],[1,"stat-value"],[1,"stat-label"],[1,"stat-card","success"],[1,"stat-card","warning"],[1,"stat-card","info"],[1,"section-title"],[1,"courses-list"],[1,"course-row"],[1,"course-info"],["alt","",1,"course-thumb",3,"src"],[1,"course-details"],[1,"course-title"],[1,"course-students"],[1,"course-metrics"],[1,"metric"],[1,"metric-value"],[1,"metric-label"],[1,"spinner"],[1,"stat-card"],[1,"chart-section"],[1,"chart-placeholder"],[1,"bar-chart"],[1,"bar-group"],[1,"modules-section"],[1,"module-list"],[1,"module-progress-item"],[1,"activity-section"],[1,"activity-list"],[1,"activity-item"],[1,"bar"],[1,"bar-label"],[1,"module-info"],[1,"module-name"],[1,"module-stats"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-percent"],[1,"activity-icon"],[1,"activity-content"],[1,"activity-text"],[1,"activity-time"]],template:function(r,l){r&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),i(4,"Analytics"),n(),t(5,"p",3),i(6,"Track your course performance and student engagement"),n()(),t(7,"select",4),R("ngModelChange",function(p){return T(l.selectedCourseId,p)||(l.selectedCourseId=p),p}),w("change",function(){return l.loadCourseAnalytics()}),t(8,"option",5),i(9,"Select a course"),n(),g(10,Y,2,2,"option",6,b),n()(),O(12,G,45,4,"div",7)(13,J,2,0,"div",8)(14,Z,53,4,"div",9),n()),r&2&&(o(7),A("ngModel",l.selectedCourseId),o(3),u(l.courses()),o(2),E(l.selectedCourseId?l.loading()?13:l.analytics()?14:-1:12))},dependencies:[F,H,D,W,B,$,N],styles:[".analytics-page[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:#1e293b;margin-bottom:.5rem}.subtitle[_ngcontent-%COMP%]{color:#64748b}.page-header[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:12px 20px;border:1px solid #e2e8f0;border-radius:10px;background:#fff;font-size:1rem;min-width:250px}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:20px;margin-bottom:2rem}.stat-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;background:#fff;padding:24px;border-radius:16px;transition:transform .2s}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px)}.stat-card[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%], .stat-icon[_ngcontent-%COMP%]{font-size:32px;color:#10b981}.stat-icon[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:14px;display:flex;align-items:center;justify-content:center}.stat-card.primary[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#dbeafe;color:#2563eb}.stat-card.success[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#dcfce7;color:#16a34a}.stat-card.warning[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#fef3c7;color:#d97706}.stat-card.info[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#e0e7ff;color:#4f46e5}.stat-value[_ngcontent-%COMP%]{display:block;font-size:1.75rem;font-weight:700;color:#1e293b}.stat-label[_ngcontent-%COMP%]{font-size:.9rem;color:#64748b}.section-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#1e293b;margin:2rem 0 1rem}.courses-list[_ngcontent-%COMP%]{background:#fff;border-radius:16px;overflow:hidden}.course-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #f1f5f9;transition:background .2s}.course-row[_ngcontent-%COMP%]:hover{background:#f8fafc}.course-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.course-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.course-thumb[_ngcontent-%COMP%]{width:64px;height:48px;border-radius:8px;object-fit:cover}.course-thumb.placeholder[_ngcontent-%COMP%]{background:#e2e8f0;display:flex;align-items:center;justify-content:center;color:#94a3b8}.course-title[_ngcontent-%COMP%]{display:block;font-weight:600;color:#1e293b;margin-bottom:4px}.course-students[_ngcontent-%COMP%]{font-size:.9rem;color:#64748b}.course-metrics[_ngcontent-%COMP%]{display:flex;gap:32px}.metric[_ngcontent-%COMP%]{text-align:center}.metric-value[_ngcontent-%COMP%]{display:block;font-size:1.25rem;font-weight:600;color:#1e293b}.metric-label[_ngcontent-%COMP%]{font-size:.8rem;color:#94a3b8}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:4rem}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid #e2e8f0;border-top-color:#10b981;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.chart-section[_ngcontent-%COMP%], .modules-section[_ngcontent-%COMP%], .activity-section[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:24px;margin-bottom:1.5rem}.chart-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .modules-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .activity-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;margin-bottom:20px}.bar-chart[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:space-around;height:200px;padding:20px 0;border-bottom:1px solid #e2e8f0}.bar-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px}.bar[_ngcontent-%COMP%]{width:40px;background:linear-gradient(180deg,#10b981,#059669);border-radius:8px 8px 0 0;min-height:10px}.bar-label[_ngcontent-%COMP%]{font-size:.85rem;color:#64748b}.module-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.module-progress-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.module-info[_ngcontent-%COMP%]{min-width:200px}.module-name[_ngcontent-%COMP%]{display:block;font-weight:500;color:#1e293b;margin-bottom:4px}.module-stats[_ngcontent-%COMP%]{font-size:.85rem;color:#94a3b8}.progress-bar[_ngcontent-%COMP%]{flex:1;height:8px;background:#e2e8f0;border-radius:4px;overflow:hidden}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#10b981,#059669);border-radius:4px}.progress-percent[_ngcontent-%COMP%]{min-width:50px;text-align:right;font-weight:600;color:#10b981}.activity-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.activity-item[_ngcontent-%COMP%]{display:flex;gap:16px;padding:12px;background:#f8fafc;border-radius:10px}.activity-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:10px;display:flex;align-items:center;justify-content:center}.activity-icon.enrollment[_ngcontent-%COMP%]{background:#dcfce7;color:#16a34a}.activity-icon.completion[_ngcontent-%COMP%]{background:#dbeafe;color:#2563eb}.activity-icon.review[_ngcontent-%COMP%]{background:#fef3c7;color:#d97706}.activity-text[_ngcontent-%COMP%]{display:block;color:#1e293b;margin-bottom:4px}.activity-time[_ngcontent-%COMP%]{font-size:.85rem;color:#94a3b8}"]})}return a})();export{le as InstructorAnalyticsComponent};
