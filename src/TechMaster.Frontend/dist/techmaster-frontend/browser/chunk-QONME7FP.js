import{a as H}from"./chunk-XQGCPSEC.js";import{a as z}from"./chunk-ZAODAAZN.js";import{a as B,b as F,d as D,g as j,m as R,n as J,o as Y,t as q}from"./chunk-HRUO5R4Q.js";import{a as V}from"./chunk-QFQZ7TF5.js";import"./chunk-XAZLOLJU.js";import{a as A}from"./chunk-UYI4POZX.js";import{a as L}from"./chunk-JLLNXAHD.js";import"./chunk-SAC5YDHM.js";import"./chunk-AJDLSE77.js";import{d as W}from"./chunk-L2ZR2CCC.js";import{$a as b,Ab as l,Cb as I,Fb as g,Gb as m,Hb as f,Ja as O,Jb as k,Na as s,W as h,Wa as C,Y as E,a as x,b as w,cb as M,eb as U,ga as p,gb as S,ha as c,lb as o,mb as n,mc as T,nb as u,qb as v,sb as P,tb as d,yb as N}from"./chunk-Q5RFH5SI.js";function G(a,_){a&1&&(o(0,"div",4),u(1,"div",6),o(2,"p"),l(3,"Loading profile..."),n()())}function K(a,_){a&1&&u(0,"div",10)}function Q(a,_){if(a&1&&u(0,"img",11),a&2){let e=d(2);M("src",e.mediaService.getAvatarUrl(e.profile().profilePhotoUrl),O)}}function Z(a,_){a&1&&u(0,"span",12)}function $(a,_){if(a&1){let e=v();o(0,"button",51),P("click",function(){p(e);let t=d(2);return c(t.removePhoto())}),l(1,"Remove"),n()}if(a&2){let e=d(2);M("disabled",e.uploadingPhoto())}}function ee(a,_){a&1&&(u(0,"span",52),l(1," Saving... "))}function te(a,_){a&1&&(o(0,"span",16),l(1,"save"),n(),l(2," Save Changes "))}function ne(a,_){if(a&1){let e=v();o(0,"div",5)(1,"section",7)(2,"h2"),l(3,"Profile Information"),n(),o(4,"div",8)(5,"div",9),b(6,K,1,0,"div",10)(7,Q,1,1,"img",11)(8,Z,1,0,"span",12),n(),o(9,"div",13)(10,"input",14,0),P("change",function(t){p(e);let i=d();return c(i.onPhotoSelected(t))}),n(),o(12,"button",15),P("click",function(){p(e);let t=N(11);return c(t.click())}),o(13,"span",16),l(14,"upload"),n(),l(15),n(),b(16,$,2,1,"button",17),n()(),o(17,"div",18)(18,"div",19)(19,"label"),l(20,"First Name *"),n(),o(21,"input",20),f("ngModelChange",function(t){p(e);let i=d();return m(i.profile().firstName,t)||(i.profile().firstName=t),c(t)}),n()(),o(22,"div",19)(23,"label"),l(24,"Last Name *"),n(),o(25,"input",21),f("ngModelChange",function(t){p(e);let i=d();return m(i.profile().lastName,t)||(i.profile().lastName=t),c(t)}),n()(),o(26,"div",19)(27,"label"),l(28,"Email *"),n(),o(29,"input",22),f("ngModelChange",function(t){p(e);let i=d();return m(i.profile().email,t)||(i.profile().email=t),c(t)}),n()(),o(30,"div",19)(31,"label"),l(32,"Phone Number"),n(),o(33,"input",23),f("ngModelChange",function(t){p(e);let i=d();return m(i.profile().phoneNumber,t)||(i.profile().phoneNumber=t),c(t)}),n()(),o(34,"div",24)(35,"label"),l(36,"Bio"),n(),o(37,"textarea",25),f("ngModelChange",function(t){p(e);let i=d();return m(i.profile().bio,t)||(i.profile().bio=t),c(t)}),n()(),o(38,"div",24)(39,"label"),l(40,"Expertise / Specialization"),n(),o(41,"input",26),f("ngModelChange",function(t){p(e);let i=d();return m(i.profile().expertise,t)||(i.profile().expertise=t),c(t)}),n()()()(),o(42,"section",7)(43,"h2"),l(44,"Social Links"),n(),o(45,"div",18)(46,"div",19)(47,"label")(48,"span",16),l(49,"link"),n(),l(50," LinkedIn "),n(),o(51,"input",27),f("ngModelChange",function(t){p(e);let i=d();return m(i.profile().linkedInUrl,t)||(i.profile().linkedInUrl=t),c(t)}),n()(),o(52,"div",19)(53,"label")(54,"span",16),l(55,"alternate_email"),n(),l(56," Twitter/X "),n(),o(57,"input",28),f("ngModelChange",function(t){p(e);let i=d();return m(i.profile().twitterUrl,t)||(i.profile().twitterUrl=t),c(t)}),n()(),o(58,"div",24)(59,"label")(60,"span",16),l(61,"language"),n(),l(62," Website "),n(),o(63,"input",29),f("ngModelChange",function(t){p(e);let i=d();return m(i.profile().websiteUrl,t)||(i.profile().websiteUrl=t),c(t)}),n()()()(),o(64,"section",7)(65,"h2"),l(66,"Preferences"),n(),o(67,"div",18)(68,"div",19)(69,"label"),l(70,"Timezone"),n(),o(71,"select",30),f("ngModelChange",function(t){p(e);let i=d();return m(i.profile().timezone,t)||(i.profile().timezone=t),c(t)}),o(72,"option",31),l(73,"UTC"),n(),o(74,"option",32),l(75,"Eastern Time (US)"),n(),o(76,"option",33),l(77,"Pacific Time (US)"),n(),o(78,"option",34),l(79,"London"),n(),o(80,"option",35),l(81,"Paris"),n(),o(82,"option",36),l(83,"Dubai"),n(),o(84,"option",37),l(85,"Riyadh"),n(),o(86,"option",38),l(87,"Tokyo"),n()()(),o(88,"div",19)(89,"label"),l(90,"Language"),n(),o(91,"select",30),f("ngModelChange",function(t){p(e);let i=d();return m(i.profile().language,t)||(i.profile().language=t),c(t)}),o(92,"option",39),l(93,"English"),n(),o(94,"option",40),l(95,"\u0627\u0644\u0639\u0631\u0628\u064A\u0629"),n()()()(),o(96,"div",41)(97,"div",42)(98,"div",43)(99,"span",44),l(100,"Push Notifications"),n(),o(101,"span",45),l(102,"Receive in-app notifications"),n()(),o(103,"label",46)(104,"input",47),f("ngModelChange",function(t){p(e);let i=d();return m(i.profile().notificationsEnabled,t)||(i.profile().notificationsEnabled=t),c(t)}),n(),u(105,"span",48),n()(),o(106,"div",42)(107,"div",43)(108,"span",44),l(109,"Email Notifications"),n(),o(110,"span",45),l(111,"Receive notifications via email"),n()(),o(112,"label",46)(113,"input",47),f("ngModelChange",function(t){p(e);let i=d();return m(i.profile().emailNotifications,t)||(i.profile().emailNotifications=t),c(t)}),n(),u(114,"span",48),n()()()(),o(115,"div",49)(116,"button",50),P("click",function(){p(e);let t=d();return c(t.saveSettings())}),b(117,ee,2,0)(118,te,3,0),n()()()}if(a&2){let e=d();s(5),U("uploading",e.uploadingPhoto()),s(),S(e.uploadingPhoto()?6:e.profile().profilePhotoUrl?7:8),s(6),M("disabled",e.uploadingPhoto()),s(3),I(" ",e.uploadingPhoto()?"Uploading...":"Upload Photo"," "),s(),S(e.profile().profilePhotoUrl?16:-1),s(5),g("ngModel",e.profile().firstName),s(4),g("ngModel",e.profile().lastName),s(4),g("ngModel",e.profile().email),s(4),g("ngModel",e.profile().phoneNumber),s(4),g("ngModel",e.profile().bio),s(4),g("ngModel",e.profile().expertise),s(10),g("ngModel",e.profile().linkedInUrl),s(6),g("ngModel",e.profile().twitterUrl),s(6),g("ngModel",e.profile().websiteUrl),s(8),g("ngModel",e.profile().timezone),s(20),g("ngModel",e.profile().language),s(13),g("ngModel",e.profile().notificationsEnabled),s(9),g("ngModel",e.profile().emailNotifications),s(3),M("disabled",e.saving()),s(),S(e.saving()?117:118)}}var ue=(()=>{class a{authService=h(z);fileUploadService=h(H);toastr=h(V);http=h(W);mediaService=h(A);apiUrl=L.apiUrl;profile=C({id:"",firstName:"",lastName:"",email:"",phoneNumber:"",bio:"",expertise:"",linkedInUrl:"",twitterUrl:"",websiteUrl:"",profilePhotoUrl:"",timezone:"UTC",language:"en",notificationsEnabled:!0,emailNotifications:!0});saving=C(!1);loading=C(!0);uploadingPhoto=C(!1);ngOnInit(){this.loadProfileFromApi()}loadProfileFromApi(){this.loading.set(!0),this.http.get(`${this.apiUrl}/auth/me`).subscribe({next:e=>{if(e.isSuccess&&e.data){let r=e.data,t=this.authService.getCurrentUser();if(t){let i=x(x({},t),r);localStorage.setItem("techmaster_user",JSON.stringify(i))}this.profile.set({id:r.id||"",firstName:r.firstName||"",lastName:r.lastName||"",email:r.email||"",phoneNumber:r.phoneNumber||r.phone||"",bio:r.bio||"",expertise:r.expertise||"",linkedInUrl:r.linkedInUrl||"",twitterUrl:r.twitterUrl||"",websiteUrl:r.websiteUrl||"",profilePhotoUrl:r.profileImageUrl||r.profilePhotoUrl||"",timezone:r.timezone||"UTC",language:r.preferredLanguage||r.language||"en",notificationsEnabled:r.notificationsEnabled!==!1,emailNotifications:r.emailNotifications!==!1})}else this.loadProfile();this.loading.set(!1)},error:()=>{this.loadProfile(),this.loading.set(!1)}})}loadProfile(){let e=this.authService.getCurrentUser();e&&this.profile.set({id:e.id||"",firstName:e.firstName||"",lastName:e.lastName||"",email:e.email||"",phoneNumber:e.phoneNumber||e.phone||"",bio:e.bio||"",expertise:e.expertise||"",linkedInUrl:e.linkedInUrl||"",twitterUrl:e.twitterUrl||"",websiteUrl:e.websiteUrl||"",profilePhotoUrl:e.profileImageUrl||"",timezone:e.timezone||"UTC",language:e.language||e.preferredLanguage||"en",notificationsEnabled:e.notificationsEnabled!==!1,emailNotifications:e.emailNotifications!==!1})}getInitials(){let e=this.profile();return(e.firstName.charAt(0)+e.lastName.charAt(0)).toUpperCase()||"U"}onPhotoSelected(e){let r=e.target;if(r.files&&r.files[0]){let t=r.files[0];if(t.size>5*1024*1024){this.toastr.error("Photo must be less than 5MB");return}this.uploadingPhoto.set(!0),this.fileUploadService.uploadImage(t).subscribe({next:i=>{if(i.status==="complete"&&i.response?.data?.url){let y=i.response.data.url;this.profile.update(X=>w(x({},X),{profilePhotoUrl:y})),this.uploadingPhoto.set(!1),this.savePhotoToDatabase(y)}else i.status==="error"&&(this.uploadingPhoto.set(!1),this.toastr.error(i.error||"Failed to upload photo"))},error:()=>{this.uploadingPhoto.set(!1),this.toastr.error("Failed to upload photo")}})}}savePhotoToDatabase(e){this.http.put(`${this.apiUrl}/auth/profile`,{profileImageUrl:e}).subscribe({next:r=>{if(r?.isSuccess){let t=this.authService.getCurrentUser();t&&(t.profileImageUrl=e,localStorage.setItem("techmaster_user",JSON.stringify(t))),this.toastr.success("Photo saved successfully")}else this.toastr.warning("Photo uploaded but failed to save. Please click Save Settings.")},error:()=>{this.toastr.warning("Photo uploaded but failed to save. Please click Save Settings.")}})}removePhoto(){this.profile.update(e=>w(x({},e),{profilePhotoUrl:""})),this.savePhotoToDatabase("")}saveSettings(){let e=this.profile();if(!e.firstName.trim()||!e.lastName.trim()){this.toastr.error("First name and last name are required");return}this.saving.set(!0);let r={firstName:e.firstName,lastName:e.lastName,phone:e.phoneNumber,bio:e.bio,expertise:e.expertise,linkedInUrl:e.linkedInUrl,twitterUrl:e.twitterUrl,websiteUrl:e.websiteUrl,profileImageUrl:e.profilePhotoUrl,timezone:e.timezone,preferredLanguage:e.language,notificationsEnabled:e.notificationsEnabled,emailNotifications:e.emailNotifications};this.authService.updateProfile(r).subscribe({next:t=>{if(this.saving.set(!1),t?.isSuccess){let i=this.authService.getCurrentUser();i&&(i.profileImageUrl=e.profilePhotoUrl,localStorage.setItem("techmaster_user",JSON.stringify(i))),this.toastr.success("Settings saved successfully"),this.loadProfileFromApi()}else this.toastr.error(t?.message||"Failed to save settings")},error:t=>{this.saving.set(!1);let i=t?.error?.message||t?.error?.messageEn||"Failed to save settings";this.toastr.error(i)}})}static \u0275fac=function(r){return new(r||a)};static \u0275cmp=E({type:a,selectors:[["app-instructor-settings"]],standalone:!0,features:[k],decls:8,vars:1,consts:[["fileInput",""],[1,"settings-page"],[1,"page-header"],[1,"subtitle"],[1,"loading-container"],[1,"settings-container"],[1,"spinner-lg"],[1,"settings-section"],[1,"profile-photo-section"],[1,"photo-preview"],[1,"upload-spinner"],["alt","Profile photo",3,"src"],[1,"initials"],[1,"photo-actions"],["type","file","accept","image/*",2,"display","none",3,"change"],[1,"upload-btn",3,"click","disabled"],[1,"material-icons"],[1,"remove-btn",3,"disabled"],[1,"form-grid"],[1,"form-group"],["type","text","placeholder","Enter first name",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter last name",3,"ngModelChange","ngModel"],["type","email","placeholder","Enter email","disabled","",3,"ngModelChange","ngModel"],["type","tel","placeholder","Enter phone number",3,"ngModelChange","ngModel"],[1,"form-group","full-width"],["placeholder","Tell students about yourself...","rows","4",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., Web Development, Data Science",3,"ngModelChange","ngModel"],["type","url","placeholder","https://linkedin.com/in/username",3,"ngModelChange","ngModel"],["type","url","placeholder","https://twitter.com/username",3,"ngModelChange","ngModel"],["type","url","placeholder","https://yourwebsite.com",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["value","UTC"],["value","America/New_York"],["value","America/Los_Angeles"],["value","Europe/London"],["value","Europe/Paris"],["value","Asia/Dubai"],["value","Asia/Riyadh"],["value","Asia/Tokyo"],["value","en"],["value","ar"],[1,"toggle-options"],[1,"toggle-option"],[1,"toggle-info"],[1,"toggle-label"],[1,"toggle-description"],[1,"toggle"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"slider"],[1,"actions-bar"],[1,"save-btn",3,"click","disabled"],[1,"remove-btn",3,"click","disabled"],[1,"spinner"]],template:function(r,t){r&1&&(o(0,"div",1)(1,"div",2)(2,"h1"),l(3,"Settings"),n(),o(4,"p",3),l(5,"Manage your profile and preferences"),n()(),b(6,G,4,0,"div",4)(7,ne,119,21,"div",5),n()),r&2&&(s(6),S(t.loading()?6:7))},dependencies:[T,q,J,Y,F,B,R,D,j],styles:['.settings-page[_ngcontent-%COMP%]{max-width:900px;margin:0 auto}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem;gap:1rem}.spinner-lg[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid #e2e8f0;border-top-color:#3b82f6;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}.page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:#1e293b;margin-bottom:.5rem}.subtitle[_ngcontent-%COMP%]{color:#64748b}.settings-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.settings-section[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:24px}.settings-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#1e293b;margin-bottom:20px;padding-bottom:12px;border-bottom:1px solid #e2e8f0}.profile-photo-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:24px;margin-bottom:24px}.photo-preview[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;background:linear-gradient(135deg,#10b981,#059669);display:flex;align-items:center;justify-content:center;overflow:hidden}.photo-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.photo-preview[_ngcontent-%COMP%]   .initials[_ngcontent-%COMP%]{color:#fff;font-size:2rem;font-weight:600}.photo-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.upload-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 16px;background:#3b82f6;color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:500}.upload-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#2563eb}.upload-btn[_ngcontent-%COMP%]:disabled{background:#94a3b8;cursor:not-allowed}.upload-spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid rgba(255,255,255,.2509803922);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}.remove-btn[_ngcontent-%COMP%]{padding:8px 16px;background:none;color:#ef4444;border:1px solid #ef4444;border-radius:8px;cursor:pointer}.remove-btn[_ngcontent-%COMP%]:hover{background:#fef2f2}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form-group.full-width[_ngcontent-%COMP%]{grid-column:span 2}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#374151;display:flex;align-items:center;gap:8px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:18px;color:#64748b}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:12px 16px;border:1px solid #e2e8f0;border-radius:10px;font-size:1rem;transition:all .2s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background:#f1f5f9;color:#64748b}.toggle-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;margin-top:20px}.toggle-option[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px;background:#f8fafc;border-radius:12px}.toggle-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.toggle-label[_ngcontent-%COMP%]{font-weight:500;color:#1e293b}.toggle-description[_ngcontent-%COMP%]{font-size:.875rem;color:#64748b}.toggle[_ngcontent-%COMP%]{position:relative;width:52px;height:28px}.toggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#cbd5e1;transition:.3s;border-radius:28px}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:22px;width:22px;left:3px;bottom:3px;background-color:#fff;transition:.3s;border-radius:50%}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#10b981}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(24px)}.actions-bar[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:20px 0}.save-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 24px;background:linear-gradient(135deg,#10b981,#059669);color:#fff;border:none;border-radius:10px;font-weight:600;font-size:1rem;cursor:pointer;transition:all .2s}.save-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #10b98166}.save-btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.spinner[_ngcontent-%COMP%]{width:18px;height:18px;border:2px solid transparent;border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media (max-width: 768px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-group.full-width[_ngcontent-%COMP%]{grid-column:span 1}.profile-photo-section[_ngcontent-%COMP%]{flex-direction:column;text-align:center}}']})}return a})();export{ue as InstructorSettingsComponent};
