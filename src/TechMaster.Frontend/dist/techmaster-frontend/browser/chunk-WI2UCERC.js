import{a as X}from"./chunk-TIQSRMW3.js";import{a as K}from"./chunk-G35OTEPF.js";import{a as Z}from"./chunk-JHXK2CUC.js";import{a as ee}from"./chunk-XQGCPSEC.js";import{a as Q}from"./chunk-ZAODAAZN.js";import{a as Y}from"./chunk-QFQZ7TF5.js";import"./chunk-XAZLOLJU.js";import{a as J}from"./chunk-UYI4POZX.js";import{a as H}from"./chunk-JLLNXAHD.js";import{a as R,c as G,d as W}from"./chunk-SAC5YDHM.js";import{d as j}from"./chunk-AJDLSE77.js";import"./chunk-L2ZR2CCC.js";import{$a as p,Ab as o,Bb as m,Cb as h,Ia as z,Ja as w,Jb as A,Ka as F,Kb as L,Lb as I,Mb as y,Na as a,Ob as T,Qb as O,W as M,Wa as f,Y as U,cb as x,eb as V,ga as _,gb as u,ha as g,hb as D,jb as E,jc as B,kb as k,kc as q,lb as n,mb as i,mc as $,nb as v,qb as S,sb as C,tb as d,yb as N}from"./chunk-Q5RFH5SI.js";var te=(t,c)=>c.id,ne=()=>["/courses"],ie=t=>({category:t}),oe=t=>["/learn",t];function re(t,c){t&1&&(n(0,"div",2),v(1,"div",3),i())}function ae(t,c){if(t&1&&(n(0,"div",25)(1,"span",10),o(2,"check_circle"),i(),n(3,"span"),o(4),i()()),t&2){let e=c.$implicit;a(4),m(e)}}function le(t,c){t&1&&o(0," play_circle ")}function ce(t,c){t&1&&o(0," article ")}function se(t,c){t&1&&o(0," quiz ")}function de(t,c){t&1&&o(0," play_circle ")}function me(t,c){if(t&1){let e=S();n(0,"button",59),C("click",function(r){_(e);let s=d().$implicit,b=d(3);return r.stopPropagation(),g(b.playFreeSession(s))}),o(1," Preview "),i()}}function ue(t,c){if(t&1){let e=S();n(0,"div",54),C("click",function(){let r=_(e).$implicit,s=d(3);return g(r.isFree&&r.type==="Video"?s.playFreeSession(r):null)}),n(1,"span",55),p(2,le,1,0)(3,ce,1,0)(4,se,1,0)(5,de,1,0),i(),n(6,"span",56),o(7),i(),p(8,me,2,0,"button",57),n(9,"span",58),o(10),i()()}if(t&2){let e,l=c.$implicit;V("clickable",l.isFree&&l.type==="Video"),a(2),u((e=l.type)==="Video"?2:e==="Article"?3:e==="Quiz"?4:5),a(5),m(l.title),a(),u(l.isFree?8:-1),a(2),h("",l.durationMinutes," min")}}function pe(t,c){if(t&1){let e=S();n(0,"div",47)(1,"button",48),C("click",function(){let r=_(e).$implicit,s=d(2);return g(s.toggleModule(r.id))}),n(2,"span",49),o(3,"expand_more"),i(),n(4,"span",50),o(5),i(),n(6,"span",51),o(7),i()(),n(8,"div",52),E(9,ue,11,6,"div",53,te),i()()}if(t&2){let e=c.$implicit,l=d(2);V("expanded",l.expandedModules().has(e.id)),a(5),m(e.title),a(2),h("",e.sessions.length," sessions"),a(2),k(e.sessions)}}function _e(t,c){if(t&1&&(n(0,"li"),o(1),i()),t&2){let e=c.$implicit;a(),m(e)}}function ge(t,c){if(t&1){let e=S();n(0,"button",60),C("click",function(){_(e);let r=d(2);return g(r.contactInstructor())}),n(1,"span",10),o(2,"chat"),i(),o(3," Contact Instructor "),i()}}function Ce(t,c){if(t&1){let e=S();n(0,"div",37),v(1,"img",19),n(2,"button",61),C("click",function(){_(e);let r=d(2);return g(r.playPreview())}),n(3,"span",10),o(4,"play_arrow"),i()()()}if(t&2){let e=d(2);a(),x("src",e.mediaService.getCourseThumbnail(e.course().thumbnailUrl),w)("alt",e.course().title)}}function xe(t,c){if(t&1&&(n(0,"div",38),v(1,"img",19),i()),t&2){let e=d(2);a(),x("src",e.mediaService.getCourseThumbnail(e.course().thumbnailUrl),w)("alt",e.course().title)}}function fe(t,c){t&1&&(n(0,"span",41),o(1,"Free"),i())}function ve(t,c){if(t&1&&(n(0,"span",62),o(1),y(2,"currency"),i(),n(3,"span",63),o(4),y(5,"currency"),i()),t&2){let e=d(3);a(),m(O(2,2,e.course().discountPrice,"EGP","symbol","1.0-0")),a(3),m(O(5,7,e.course().price,"EGP","symbol","1.0-0"))}}function he(t,c){if(t&1&&(n(0,"span",62),o(1),y(2,"currency"),i()),t&2){let e=d(3);a(),m(O(2,1,e.course().price,"EGP","symbol","1.0-0"))}}function be(t,c){if(t&1&&p(0,ve,6,12)(1,he,3,6,"span",62),t&2){let e=d(2);u(e.course().discountPrice&&e.course().discountPrice<e.course().price?0:1)}}function ye(t,c){if(t&1&&(n(0,"a",42),o(1," Continue Learning "),i()),t&2){let e=d(2);x("routerLink",I(1,oe,e.course().slug))}}function Pe(t,c){t&1&&(n(0,"button",43),o(1," Enrollment Pending "),i())}function Me(t,c){t&1&&v(0,"span",66)}function Se(t,c){t&1&&o(0," Enroll Now - Free ")}function we(t,c){if(t&1){let e=S();n(0,"button",65),C("click",function(){_(e);let r=d(3);return g(r.enrollFree())}),p(1,Me,1,0,"span",66)(2,Se,1,0),i()}if(t&2){let e=d(3);x("disabled",e.enrolling()),a(),u(e.enrolling()?1:2)}}function Oe(t,c){t&1&&v(0,"span",66)}function Ee(t,c){if(t&1&&(o(0),y(1,"currency")),t&2){let e=d(4);h(" Enroll Now - ",O(1,1,e.course().price,"EGP","symbol","1.0-0")," ")}}function ke(t,c){if(t&1){let e=S();n(0,"button",65),C("click",function(){_(e);let r=d(3);return g(r.startEnrollment())}),p(1,Oe,1,0,"span",66)(2,Ee,2,6),i()}if(t&2){let e=d(3);x("disabled",e.enrolling()),a(),u(e.enrolling()?1:2)}}function Te(t,c){if(t&1&&p(0,we,3,2,"button",64)(1,ke,3,2,"button",64),t&2){let e=d(2);u(e.course().price===0?0:1)}}function Ve(t,c){if(t&1&&v(0,"iframe",71),t&2){let e=d(3);x("src",e.getSafeEmbedUrl(),F)}}function De(t,c){if(t&1&&(n(0,"video",72),o(1," Your browser does not support the video tag. "),i()),t&2){let e=d(3);x("src",e.getVideoUrl(),w)}}function Ie(t,c){if(t&1){let e=S();n(0,"div",67),C("click",function(){_(e);let r=d(2);return g(r.closeVideoModal())}),n(1,"div",68),C("click",function(r){return _(e),g(r.stopPropagation())}),n(2,"div",69)(3,"h3"),o(4),i(),n(5,"button",70),C("click",function(){_(e);let r=d(2);return g(r.closeVideoModal())}),n(6,"span",10),o(7,"close"),i()()(),p(8,Ve,1,1,"iframe",71)(9,De,2,1,"video",72),i()()}if(t&2){let e=d(2);a(4),m(e.currentVideoTitle()),a(4),u(e.isExternalVideo(e.currentVideoUrl())?8:9)}}function Ue(t,c){if(t&1&&(n(0,"strong"),o(1),y(2,"currency"),i(),n(3,"span",91),o(4),y(5,"currency"),i()),t&2){let e=d(3);a(),m(O(2,2,e.course().discountPrice,"EGP","symbol","1.0-0")),a(3),m(O(5,7,e.course().price,"EGP","symbol","1.0-0"))}}function ze(t,c){if(t&1&&(n(0,"strong"),o(1),y(2,"currency"),i()),t&2){let e=d(3);a(),m(O(2,1,e.course().price,"EGP","symbol","1.0-0"))}}function Fe(t,c){if(t&1&&(n(0,"div",80)(1,"h4"),o(2,"Bank Transfer Details"),i(),n(3,"div",92)(4,"span"),o(5,"Bank:"),i(),n(6,"strong"),o(7),i()(),n(8,"div",92)(9,"span"),o(10,"Account Number:"),i(),n(11,"strong"),o(12),i()(),n(13,"div",92)(14,"span"),o(15,"Account Name:"),i(),n(16,"strong"),o(17),i()()()),t&2){let e,l,r,s=d(3);a(7),m((e=s.paymentSettings())==null||e["payment.bankName"]==null?null:e["payment.bankName"].value),a(5),m((l=s.paymentSettings())==null||l["payment.bankAccountNumber"]==null?null:l["payment.bankAccountNumber"].value),a(5),m((r=s.paymentSettings())==null||r["payment.bankAccountName"]==null?null:r["payment.bankAccountName"].value)}}function Ne(t,c){if(t&1&&(n(0,"div",80)(1,"h4"),o(2,"E-Wallet Payment"),i(),n(3,"div",92)(4,"span"),o(5),i(),n(6,"strong"),o(7),i()()()),t&2){let e,l,r=d(3);a(5),h("",((e=r.paymentSettings())==null||e["payment.walletType"]==null?null:e["payment.walletType"].value)||"Wallet",":"),a(2),m((l=r.paymentSettings())==null||l["payment.walletNumber"]==null?null:l["payment.walletNumber"].value)}}function Ae(t,c){t&1&&v(0,"span",66)}function Le(t,c){t&1&&o(0," \u2713 Screenshot Uploaded ")}function Be(t,c){t&1&&o(0," \u{1F4F7} Upload Screenshot ")}function qe(t,c){if(t&1&&(n(0,"div",87),v(1,"img",93),i()),t&2){let e=d(3);a(),x("src",e.mediaService.getMediaUrl(e.paymentScreenshotUrl()),w)}}function $e(t,c){t&1&&v(0,"span",66)}function je(t,c){if(t&1){let e=S();n(0,"div",73),C("click",function(){_(e);let r=d(2);return g(r.closePaymentModal())}),n(1,"div",74),C("click",function(r){return _(e),g(r.stopPropagation())}),n(2,"div",75)(3,"h2"),o(4,"Complete Your Enrollment"),i(),n(5,"button",70),C("click",function(){_(e);let r=d(2);return g(r.closePaymentModal())}),n(6,"span",10),o(7,"close"),i()()(),n(8,"div",76)(9,"div",77),v(10,"img",19),n(11,"div")(12,"h3"),o(13),i(),n(14,"p",78),p(15,Ue,6,12)(16,ze,3,6,"strong"),i()()(),n(17,"div",79)(18,"h4"),o(19,"Payment Instructions"),i(),n(20,"p"),o(21),i()(),p(22,Fe,18,3,"div",80)(23,Ne,8,2,"div",80),n(24,"div",81)(25,"a",82)(26,"span"),o(27,"\u{1F4F1}"),i(),o(28," Contact via WhatsApp "),i()(),n(29,"div",83)(30,"h4"),o(31,"Upload Payment Screenshot (Optional)"),i(),n(32,"p",84),o(33,"Upload a screenshot of your payment receipt for faster verification"),i(),n(34,"input",85,0),C("change",function(r){_(e);let s=d(2);return g(s.onPaymentScreenshotSelected(r))}),i(),n(36,"button",86),C("click",function(){_(e);let r=N(35);return g(r.click())}),p(37,Ae,1,0,"span",66)(38,Le,1,0)(39,Be,1,0),i(),p(40,qe,2,1,"div",87),i()(),n(41,"div",88)(42,"button",89),C("click",function(){_(e);let r=d(2);return g(r.closePaymentModal())}),o(43,"Cancel"),i(),n(44,"button",90),C("click",function(){_(e);let r=d(2);return g(r.submitEnrollment())}),p(45,$e,1,0,"span",66),o(46," Submit Enrollment Request "),i()()()()}if(t&2){let e,l,r,s=d(2);a(10),x("src",s.mediaService.getCourseThumbnail(s.course().thumbnailUrl),w)("alt",s.course().title),a(3),m(s.course().title),a(2),u(s.course().discountPrice&&s.course().discountPrice<s.course().price?15:16),a(6),m(((e=s.paymentSettings())==null||e["payment.paymentInstructions"]==null?null:e["payment.paymentInstructions"].value)||"Please complete payment and upload your receipt below."),a(),u(!((l=s.paymentSettings())==null||l["payment.bankName"]==null)&&l["payment.bankName"].value?22:-1),a(),u(!((r=s.paymentSettings())==null||r["payment.walletNumber"]==null)&&r["payment.walletNumber"].value?23:-1),a(2),x("href",s.getWhatsAppPaymentLink(),w),a(11),x("disabled",s.uploadingScreenshot()),a(),u(s.uploadingScreenshot()?37:s.paymentScreenshotUrl()?38:39),a(3),u(s.paymentScreenshotUrl()?40:-1),a(4),x("disabled",s.enrolling()),a(),u(s.enrolling()?45:-1)}}function Re(t,c){if(t&1&&(n(0,"section",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"a",9),o(6,"Courses"),i(),n(7,"span",10),o(8,"chevron_right"),i(),n(9,"a",11),o(10),i()(),n(11,"h1"),o(12),i(),n(13,"p",12),o(14),i(),n(15,"div",13)(16,"div",14)(17,"span",10),o(18,"star"),i(),n(19,"span",15),o(20),y(21,"number"),i(),n(22,"span",16),o(23),i()(),n(24,"div",17)(25,"span",10),o(26,"people"),i(),o(27),i(),n(28,"div",17)(29,"span",10),o(30,"access_time"),i(),o(31),y(32,"number"),i(),n(33,"div",17)(34,"span",10),o(35,"signal_cellular_alt"),i(),o(36),i()(),n(37,"div",18),v(38,"img",19),n(39,"span"),o(40,"Created by "),n(41,"strong"),o(42),i()()()()()()(),n(43,"section",20)(44,"div",5)(45,"div",21)(46,"div",22)(47,"div",23)(48,"h2"),o(49,"What You'll Learn"),i(),n(50,"div",24),E(51,ae,5,1,"div",25,D),i()(),n(53,"div",23)(54,"h2"),o(55,"Course Content"),i(),n(56,"div",26)(57,"span"),o(58),i(),n(59,"span"),o(60,"\u2022"),i(),n(61,"span"),o(62),i(),n(63,"span"),o(64,"\u2022"),i(),n(65,"span"),o(66),y(67,"number"),i()(),n(68,"div",27),E(69,pe,11,4,"div",28,te),i()(),n(71,"div",23)(72,"h2"),o(73,"Requirements"),i(),n(74,"ul",29),E(75,_e,2,1,"li",null,D),i()(),n(77,"div",23)(78,"h2"),o(79,"Description"),i(),v(80,"div",30),i(),n(81,"div",23)(82,"h2"),o(83,"Instructor"),i(),n(84,"div",31),v(85,"img",19),n(86,"div",32)(87,"h3"),o(88),i(),n(89,"p",33),o(90),i(),p(91,ge,4,0,"button",34),i()()()(),n(92,"div",35)(93,"div",36),p(94,Ce,5,2,"div",37)(95,xe,2,2,"div",38),n(96,"div",39)(97,"div",40),p(98,fe,2,0,"span",41)(99,be,2,1),i(),p(100,ye,2,3,"a",42)(101,Pe,2,0,"button",43)(102,Te,2,1),n(103,"div",44)(104,"h4"),o(105,"This course includes:"),i(),n(106,"ul")(107,"li")(108,"span",10),o(109,"play_circle"),i(),o(110),y(111,"number"),i(),n(112,"li")(113,"span",10),o(114,"article"),i(),o(115," Downloadable resources "),i(),n(116,"li")(117,"span",10),o(118,"all_inclusive"),i(),o(119," Full lifetime access "),i(),n(120,"li")(121,"span",10),o(122,"smartphone"),i(),o(123," Access on mobile and TV "),i(),n(124,"li")(125,"span",10),o(126,"workspace_premium"),i(),o(127," Certificate of completion "),i()()()()()()()()(),p(128,Ie,10,2,"div",45)(129,je,47,13,"div",46)),t&2){let e=d();a(9),x("routerLink",L(40,ne))("queryParams",I(41,ie,e.course().categoryName)),a(),m(e.course().categoryName),a(2),m(e.course().title),a(2),m(e.course().shortDescription),a(6),m(T(21,28,e.course().averageRating,"1.1-1")),a(3),h("(",e.course().reviewCount," reviews)"),a(4),h(" ",e.course().enrollmentCount," students "),a(4),h(" ",T(32,31,e.course().totalDurationMinutes/60,"1.0-0")," hours "),a(5),h(" ",e.course().level," "),a(2),x("src",e.mediaService.getAvatarUrl(e.course().instructorAvatarUrl),w)("alt",e.course().instructorName),a(4),m(e.course().instructorName),a(9),k(e.course().whatYouWillLearn),a(7),h("",e.course().modules.length," modules"),a(4),h("",e.getTotalSessions()," sessions"),a(4),h("",T(67,34,e.course().totalDurationMinutes/60,"1.0-0")," hours total"),a(3),k(e.course().modules),a(6),k(e.course().requirements),a(5),x("innerHTML",e.course().description,z),a(5),x("src",e.mediaService.getAvatarUrl(e.course().instructorAvatarUrl),w)("alt",e.course().instructorName),a(3),m(e.course().instructorName),a(2),m(e.course().instructorBio),a(),u(e.isEnrolled()?91:-1),a(3),u(e.course().previewVideoUrl?94:95),a(4),u(e.course().price===0?98:99),a(2),u(e.isEnrolled()?100:e.enrollmentPending()?101:102),a(10),h(" ",T(111,37,e.course().totalDurationMinutes/60,"1.0-0")," hours on-demand video "),a(18),u(e.showVideoModal()?128:-1),a(),u(e.showPaymentModal()?129:-1)}}var at=(()=>{class t{route=M(R);router=M(G);courseService=M(K);enrollmentService=M(X);authService=M(Q);toastr=M(Y);sanitizer=M(j);settingsService=M(Z);fileUploadService=M(ee);mediaService=M(J);course=f(null);isLoading=f(!0);expandedModules=f(new Set);isEnrolled=f(!1);enrollmentPending=f(!1);enrolling=f(!1);showVideoModal=f(!1);currentVideoUrl=f("");currentVideoTitle=f("");showPaymentModal=f(!1);paymentScreenshotUrl=f("");uploadingScreenshot=f(!1);paymentSettings=f(null);ngOnInit(){let e=this.route.snapshot.paramMap.get("slug");e&&this.loadCourse(e)}loadCourse(e){this.isLoading.set(!0),this.courseService.getCourseBySlug(e).subscribe({next:l=>{if(l.isSuccess&&l.data){let r=l.data,s={id:r.id,title:r.nameEn||r.title||"",slug:r.slug||"",description:r.descriptionEn||r.description||"",shortDescription:r.descriptionEn?.substring(0,200)||"",thumbnailUrl:r.thumbnailUrl||"",previewVideoUrl:r.trailerVideoUrl||r.previewVideoUrl||"",price:r.price||0,discountPrice:r.discountPrice||r.price||0,level:r.level||"Beginner",language:"English",categoryId:r.category?.id||0,categoryName:r.category?.nameEn||"General",instructorId:r.instructor?.id||0,instructorName:r.instructor?.fullName||"Instructor",instructorBio:r.instructor?.bio||"",instructorAvatarUrl:r.instructor?.profileImageUrl||"",totalDurationMinutes:(r.durationInHours||0)*60,enrollmentCount:r.enrollmentCount||0,averageRating:r.averageRating||0,reviewCount:r.reviewCount||0,requirements:r.requirementsEn?.split(`
`).filter(b=>b.trim())||[],whatYouWillLearn:r.whatYouWillLearnEn?.split(`
`).filter(b=>b.trim())||[],modules:(r.modules||[]).map(b=>({id:b.id,title:b.nameEn||b.title||"Module",order:b.sortOrder||b.order||0,sessions:(b.sessions||[]).map(P=>({id:P.id,title:P.nameEn||P.title||"Session",type:this.mapSessionType(P.type),durationMinutes:P.durationInMinutes||P.durationMinutes||10,order:P.sortOrder||P.order||0,isFree:P.isFree||P.isFreePreview||!1,videoUrl:P.videoUrl||""}))}))};this.course.set(s),this.isLoading.set(!1),s.modules?.length>0&&this.expandedModules.set(new Set([s.modules[0].id])),this.checkEnrollment(s.id)}else this.isLoading.set(!1),this.toastr.error("Course not found")},error:()=>{this.isLoading.set(!1),this.toastr.error("Failed to load course")}})}checkEnrollment(e){this.authService.isAuthenticated()&&this.enrollmentService.checkEnrollment(e).subscribe({next:l=>{l&&(this.isEnrolled.set(l.status==="Approved"||l.status==="Completed"),this.enrollmentPending.set(l.status==="Pending"||l.status==="PaymentPending"))}})}getTotalSessions(){return this.course()?this.course().modules.reduce((e,l)=>e+l.sessions.length,0):0}toggleModule(e){this.expandedModules.update(l=>{let r=new Set(l);return r.has(e)?r.delete(e):r.add(e),r})}playPreview(){this.course()?.previewVideoUrl&&(this.currentVideoUrl.set(this.course().previewVideoUrl),this.currentVideoTitle.set("Course Preview"),this.showVideoModal.set(!0))}playFreeSession(e){e.videoUrl?(this.currentVideoUrl.set(e.videoUrl),this.currentVideoTitle.set(e.title),this.showVideoModal.set(!0)):this.toastr.info("No video available for this session")}closeVideoModal(){this.showVideoModal.set(!1),this.currentVideoUrl.set(""),this.currentVideoTitle.set("")}getVideoUrl(){let e=this.currentVideoUrl()||this.course()?.previewVideoUrl||"";return this.mediaService.getVideoUrl(e)}isExternalVideo(e){return e.includes("youtube")||e.includes("vimeo")||e.includes("youtu.be")}getEmbedUrl(){let e=this.currentVideoUrl();return e.includes("youtube.com/watch")?`https://www.youtube.com/embed/${e.split("v=")[1]?.split("&")[0]}?autoplay=1`:e.includes("youtu.be")?`https://www.youtube.com/embed/${e.split("youtu.be/")[1]?.split("?")[0]}?autoplay=1`:e.includes("vimeo.com")?`https://player.vimeo.com/video/${e.split("vimeo.com/")[1]?.split("?")[0]}?autoplay=1`:e}getSafeEmbedUrl(){return this.sanitizer.bypassSecurityTrustResourceUrl(this.getEmbedUrl())}enrollFree(){if(!this.authService.isAuthenticated()){this.router.navigate(["/auth/login"],{queryParams:{returnUrl:this.router.url}});return}this.enrolling.set(!0),this.enrollmentService.enrollFree(this.course().id).subscribe({next:()=>{this.enrolling.set(!1),this.isEnrolled.set(!0),this.toastr.success("Successfully enrolled!")},error:e=>{this.enrolling.set(!1),this.toastr.error(e.error?.message||"Enrollment failed")}})}startEnrollment(){if(!this.authService.isAuthenticated()){this.router.navigate(["/auth/login"],{queryParams:{returnUrl:this.router.url}});return}this.loadPaymentSettings(),this.showPaymentModal.set(!0)}loadPaymentSettings(){this.settingsService.getPublicSettings().subscribe({next:e=>{this.paymentSettings.set(e)}})}onPaymentScreenshotSelected(e){let l=e.target;if(l.files&&l.files[0]){let r=l.files[0];if(r.size>5*1024*1024){this.toastr.error("File size must be less than 5MB");return}this.uploadingScreenshot.set(!0),this.fileUploadService.uploadImage(r).subscribe({next:s=>{s.status==="complete"&&s.response?.data?.url?(this.paymentScreenshotUrl.set(s.response.data.url),this.uploadingScreenshot.set(!1),this.toastr.success("Screenshot uploaded successfully")):s.status==="error"&&(this.uploadingScreenshot.set(!1),this.toastr.error(s.error||"Upload failed"))},error:()=>{this.uploadingScreenshot.set(!1),this.toastr.error("Failed to upload screenshot")}})}}submitEnrollment(){this.enrolling.set(!0),this.enrollmentService.enroll({courseId:this.course().id.toString(),paymentScreenshotUrl:this.paymentScreenshotUrl()||void 0}).subscribe({next:()=>{this.enrolling.set(!1),this.enrollmentPending.set(!0),this.showPaymentModal.set(!1),this.toastr.success("Enrollment request submitted! Please wait for admin approval.")},error:e=>{this.enrolling.set(!1),this.toastr.error(e.error?.message||"Enrollment request failed")}})}closePaymentModal(){this.showPaymentModal.set(!1),this.paymentScreenshotUrl.set("")}getWhatsAppPaymentLink(){let e=this.paymentSettings()?.["payment.whatsappNumber"]?.value||H.whatsappNumber||"201029907297",l=encodeURIComponent(`Hi, I want to enroll in: ${this.course().title}
Price: ${this.course().price} EGP`);return`https://wa.me/${e.replace(/[^0-9]/g,"")}?text=${l}`}mapSessionType(e){if(typeof e=="string"){let l=e.toLowerCase();return l==="article"?"Article":l==="quiz"?"Quiz":"Video"}return typeof e=="number"?e===3?"Article":e===4?"Quiz":"Video":"Video"}contactInstructor(){let e=this.course();if(!e?.instructorId){this.toastr.error("Instructor information not available");return}this.router.navigate(["/chat"],{queryParams:{instructorId:e.instructorId,courseId:e.id,courseName:e.title}})}static \u0275fac=function(l){return new(l||t)};static \u0275cmp=U({type:t,selectors:[["app-course-detail"]],standalone:!0,features:[A],decls:3,vars:1,consts:[["screenshotInput",""],[1,"course-detail-page"],[1,"loading-container"],[1,"spinner-lg"],[1,"course-header"],[1,"container"],[1,"header-content"],[1,"header-text"],[1,"breadcrumb"],["routerLink","/courses"],[1,"material-icons"],[3,"routerLink","queryParams"],[1,"course-description"],[1,"course-meta"],[1,"meta-item","rating"],[1,"rating-value"],[1,"rating-count"],[1,"meta-item"],[1,"instructor-info"],[3,"src","alt"],[1,"course-content"],[1,"content-layout"],[1,"main-content"],[1,"content-card"],[1,"learning-grid"],[1,"learning-item"],[1,"content-summary"],[1,"modules-accordion"],[1,"module-item",3,"expanded"],[1,"requirements-list"],[1,"course-full-description",3,"innerHTML"],[1,"instructor-card"],[1,"instructor-details"],[1,"instructor-bio"],[1,"contact-instructor-btn"],[1,"sidebar"],[1,"enrollment-card"],[1,"preview-video"],[1,"preview-image"],[1,"card-content"],[1,"price-section"],[1,"price","free"],[1,"btn","btn-primary","btn-lg","btn-block",3,"routerLink"],["disabled","",1,"btn","btn-secondary","btn-lg","btn-block"],[1,"course-includes"],[1,"video-modal-overlay"],[1,"payment-modal-overlay"],[1,"module-item"],[1,"module-header",3,"click"],[1,"material-icons","expand-icon"],[1,"module-title"],[1,"module-info"],[1,"module-content"],[1,"session-item",3,"clickable"],[1,"session-item",3,"click"],[1,"material-icons","session-icon"],[1,"session-title"],[1,"free-badge","preview-btn-small"],[1,"session-duration"],[1,"free-badge","preview-btn-small",3,"click"],[1,"contact-instructor-btn",3,"click"],[1,"play-btn",3,"click"],[1,"price"],[1,"original-price"],[1,"btn","btn-primary","btn-lg","btn-block",3,"disabled"],[1,"btn","btn-primary","btn-lg","btn-block",3,"click","disabled"],[1,"spinner"],[1,"video-modal-overlay",3,"click"],[1,"video-modal-content",3,"click"],[1,"video-modal-header"],[1,"close-btn",3,"click"],["frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","",1,"video-player-iframe",3,"src"],["controls","","autoplay","",1,"video-player",3,"src"],[1,"payment-modal-overlay",3,"click"],[1,"payment-modal",3,"click"],[1,"payment-modal-header"],[1,"payment-modal-body"],[1,"course-summary"],[1,"price-summary"],[1,"payment-instructions"],[1,"payment-details"],[1,"payment-actions"],["target","_blank",1,"whatsapp-btn",3,"href"],[1,"screenshot-upload"],[1,"upload-hint"],["type","file","accept","image/*",2,"display","none",3,"change"],[1,"upload-btn",3,"click","disabled"],[1,"screenshot-preview"],[1,"payment-modal-footer"],[1,"cancel-btn",3,"click"],[1,"submit-btn",3,"click","disabled"],[1,"original"],[1,"detail-row"],["alt","Payment Screenshot",3,"src"]],template:function(l,r){l&1&&(n(0,"div",1),p(1,re,2,0,"div",2)(2,Re,130,43),i()),l&2&&(a(),u(r.isLoading()?1:r.course()?2:-1))},dependencies:[$,B,q,W],styles:[".course-detail-page[_ngcontent-%COMP%]{min-height:100vh}.video-modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000e6;z-index:1000;display:flex;align-items:center;justify-content:center}.video-modal-content[_ngcontent-%COMP%]{position:relative;width:90%;max-width:900px;background:#000;border-radius:12px;overflow:hidden}.video-modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;background:#000c;border-bottom:1px solid rgba(255,255,255,.1)}.video-modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;font-size:1rem;font-weight:600;margin:0}.video-modal-content[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff;cursor:pointer;padding:8px;border-radius:50%;transition:background .2s}.video-modal-content[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#ffffff1a}.video-player[_ngcontent-%COMP%]{width:100%;max-height:70vh;display:block}.video-player-iframe[_ngcontent-%COMP%]{width:100%;aspect-ratio:16/9;display:block}.loading-container[_ngcontent-%COMP%]{min-height:60vh;display:flex;align-items:center;justify-content:center}.spinner-lg[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid var(--color-gray-200);border-top-color:var(--color-primary);border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.course-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-dark) 0%,#1a1a1a 100%);padding:100px 0 60px;color:#fff}.breadcrumb[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:1rem;font-size:.875rem}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--color-primary);text-decoration:none}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.breadcrumb[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:1rem;color:var(--color-gray-400)}.course-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:1rem;max-width:700px}.course-description[_ngcontent-%COMP%]{font-size:1.125rem;opacity:.9;margin-bottom:1.5rem;max-width:700px}.course-meta[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1.5rem;margin-bottom:1.5rem}.meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.875rem}.meta-item[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:1.25rem}.meta-item.rating[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#f59e0b}.rating-value[_ngcontent-%COMP%]{font-weight:600;color:#f59e0b}.rating-count[_ngcontent-%COMP%]{opacity:.7}.instructor-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.instructor-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;object-fit:cover}.course-content[_ngcontent-%COMP%]{padding:3rem 0;background:var(--color-gray-100)}.content-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 380px;gap:2rem;align-items:start}.content-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;margin-bottom:1.5rem;box-shadow:0 2px 10px #0000000d}.content-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--color-dark);margin-bottom:1.25rem}.learning-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem}.learning-item[_ngcontent-%COMP%]{display:flex;gap:.75rem}.learning-item[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:var(--color-primary);font-size:1.25rem;flex-shrink:0}.content-summary[_ngcontent-%COMP%]{display:flex;gap:.75rem;font-size:.875rem;color:var(--color-gray-600);margin-bottom:1rem}.modules-accordion[_ngcontent-%COMP%]{border:1px solid var(--color-gray-200);border-radius:8px;overflow:hidden}.module-item[_ngcontent-%COMP%]{border-bottom:1px solid var(--color-gray-200)}.module-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.module-header[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;gap:.75rem;padding:1rem;background:var(--color-gray-50);border:none;cursor:pointer;text-align:left}.expand-icon[_ngcontent-%COMP%]{transition:transform .3s ease}.module-item.expanded[_ngcontent-%COMP%]   .expand-icon[_ngcontent-%COMP%]{transform:rotate(180deg)}.module-title[_ngcontent-%COMP%]{flex:1;font-weight:500}.module-info[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-gray-500)}.module-content[_ngcontent-%COMP%]{display:none;padding:0}.module-item.expanded[_ngcontent-%COMP%]   .module-content[_ngcontent-%COMP%]{display:block}.session-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.875rem 1rem .875rem 2.5rem;border-top:1px solid var(--color-gray-100)}.session-icon[_ngcontent-%COMP%]{color:var(--color-gray-400);font-size:1.25rem}.session-title[_ngcontent-%COMP%]{flex:1;font-size:.875rem}.free-badge[_ngcontent-%COMP%]{font-size:.625rem;font-weight:600;text-transform:uppercase;padding:.25rem .5rem;background:var(--color-primary);color:#fff;border-radius:4px}.free-badge.preview-btn-small[_ngcontent-%COMP%]{cursor:pointer;transition:all .2s ease}.free-badge.preview-btn-small[_ngcontent-%COMP%]:hover{background:var(--color-dark);transform:scale(1.05)}.session-item.clickable[_ngcontent-%COMP%]{cursor:pointer;transition:background-color .2s ease}.session-item.clickable[_ngcontent-%COMP%]:hover{background-color:#2470901a}.session-duration[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-gray-500)}.requirements-list[_ngcontent-%COMP%]{padding-left:1.5rem}.requirements-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.5rem;color:var(--color-gray-600)}.course-full-description[_ngcontent-%COMP%]{line-height:1.8;color:var(--color-gray-700)}.instructor-card[_ngcontent-%COMP%]{display:flex;gap:1.5rem}.instructor-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;object-fit:cover}.instructor-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;margin-bottom:.5rem}.instructor-bio[_ngcontent-%COMP%]{color:var(--color-gray-600);line-height:1.7}.contact-instructor-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;margin-top:1rem;padding:.75rem 1.25rem;background:var(--color-primary);color:#fff;border:none;border-radius:8px;font-weight:500;cursor:pointer;transition:background .2s ease}.contact-instructor-btn[_ngcontent-%COMP%]:hover{background:var(--color-primary-dark)}.contact-instructor-btn[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:1.25rem}.sidebar[_ngcontent-%COMP%]{position:sticky;top:100px}.enrollment-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 4px 20px #0000001a}.preview-video[_ngcontent-%COMP%], .preview-image[_ngcontent-%COMP%]{position:relative;aspect-ratio:16/9}.preview-video[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .preview-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.play-btn[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:60px;height:60px;border-radius:50%;background:#000000b3;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease}.play-btn[_ngcontent-%COMP%]:hover{background:var(--color-primary);transform:translate(-50%,-50%) scale(1.1)}.play-btn[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:2rem;color:#fff}.card-content[_ngcontent-%COMP%]{padding:1.5rem}.price-section[_ngcontent-%COMP%]{margin-bottom:1rem}.price[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--color-dark)}.price.free[_ngcontent-%COMP%]{color:#10b981}.original-price[_ngcontent-%COMP%]{font-size:1rem;color:var(--color-gray-400);text-decoration:line-through;margin-left:.75rem}.btn-block[_ngcontent-%COMP%]{width:100%;margin-bottom:.75rem}.btn-secondary[_ngcontent-%COMP%]{background:var(--color-gray-200);color:var(--color-gray-600)}.btn-whatsapp[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;background:#25d366;color:#fff;text-decoration:none}.btn-whatsapp[_ngcontent-%COMP%]:hover{background:#1da851}.course-includes[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1.5rem;border-top:1px solid var(--color-gray-200)}.course-includes[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;margin-bottom:1rem}.course-includes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.course-includes[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.5rem 0;font-size:.875rem;color:var(--color-gray-600)}.course-includes[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:1.25rem;color:var(--color-gray-400)}.spinner[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@media (max-width: 1024px){.content-layout[_ngcontent-%COMP%]{grid-template-columns:1fr}.sidebar[_ngcontent-%COMP%]{position:static;order:-1}.learning-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 640px){.course-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.instructor-card[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:center}}.payment-modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;z-index:1000;display:flex;align-items:center;justify-content:center;padding:1rem}.payment-modal[_ngcontent-%COMP%]{background:#fff;border-radius:16px;width:100%;max-width:500px;max-height:90vh;overflow-y:auto}.payment-modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.25rem;border-bottom:1px solid var(--color-gray-200)}.payment-modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;margin:0}.payment-modal-body[_ngcontent-%COMP%]{padding:1.25rem}.course-summary[_ngcontent-%COMP%]{display:flex;gap:1rem;padding:1rem;background:var(--color-gray-100);border-radius:8px;margin-bottom:1.5rem}.course-summary[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:50px;object-fit:cover;border-radius:6px}.course-summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.95rem;margin-bottom:.25rem}.price-summary[_ngcontent-%COMP%]{font-size:.9rem}.price-summary[_ngcontent-%COMP%]   .original[_ngcontent-%COMP%]{text-decoration:line-through;color:var(--color-gray-400);margin-left:.5rem}.payment-instructions[_ngcontent-%COMP%]{margin-bottom:1.5rem}.payment-instructions[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;margin-bottom:.5rem}.payment-instructions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;color:var(--color-gray-600)}.payment-details[_ngcontent-%COMP%]{background:var(--color-gray-100);padding:1rem;border-radius:8px;margin-bottom:1rem}.payment-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;margin-bottom:.75rem;color:var(--color-primary)}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.5rem 0;font-size:.9rem;border-bottom:1px dashed var(--color-gray-300)}.detail-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.payment-actions[_ngcontent-%COMP%]{margin:1.5rem 0;text-align:center}.whatsapp-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.875rem 1.5rem;background:#25d366;color:#fff;border-radius:8px;text-decoration:none;font-weight:600;transition:background .2s}.whatsapp-btn[_ngcontent-%COMP%]:hover{background:#128c7e}.screenshot-upload[_ngcontent-%COMP%]{padding:1rem;border:2px dashed var(--color-gray-300);border-radius:8px;text-align:center}.screenshot-upload[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.9rem;margin-bottom:.25rem}.upload-hint[_ngcontent-%COMP%]{font-size:.8rem;color:var(--color-gray-500);margin-bottom:1rem}.upload-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.625rem 1.25rem;background:var(--color-gray-100);border:1px solid var(--color-gray-300);border-radius:6px;cursor:pointer;font-weight:500}.upload-btn[_ngcontent-%COMP%]:hover{background:var(--color-gray-200)}.screenshot-preview[_ngcontent-%COMP%]{margin-top:1rem}.screenshot-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:150px;border-radius:8px;border:1px solid var(--color-gray-200)}.payment-modal-footer[_ngcontent-%COMP%]{display:flex;gap:.75rem;padding:1.25rem;border-top:1px solid var(--color-gray-200)}.cancel-btn[_ngcontent-%COMP%]{flex:1;padding:.75rem;background:var(--color-gray-100);border:none;border-radius:8px;font-weight:600;cursor:pointer}.submit-btn[_ngcontent-%COMP%]{flex:2;padding:.75rem;background:var(--color-primary);color:#fff;border:none;border-radius:8px;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:.5rem}.submit-btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}"]})}return t})();export{at as CourseDetailComponent};
