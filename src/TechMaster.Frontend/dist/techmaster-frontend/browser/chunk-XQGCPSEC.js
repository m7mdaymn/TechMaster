import{a as f}from"./chunk-JLLNXAHD.js";import{b as m,c as s,d as c}from"./chunk-L2ZR2CCC.js";import{Q as d,W as u,r as l,y as n}from"./chunk-Q5RFH5SI.js";var P=(()=>{class p{http=u(c);API_URL=`${f.apiUrl}/fileupload`;uploadImage(e){return this.uploadFile(e,"images")}uploadVideo(e){return this.uploadFile(e,"videos")}uploadDocument(e){return this.uploadFile(e,"documents")}uploadMaterial(e){return this.uploadFile(e,"materials")}uploadMultiple(e,t="documents"){let r=new FormData;return e.forEach(i=>r.append("files",i)),this.http.post(`${this.API_URL}/multiple?type=${t}`,r)}deleteFile(e){return this.http.delete(this.API_URL,{params:{url:e}})}uploadFile(e,t){let r=new FormData;r.append("file",e);let i=new m("POST",`${this.API_URL}/${t}`,r,{reportProgress:!0});return this.http.request(i).pipe(n(a=>a.type===s.UploadProgress||a.type===s.Response),l(a=>{if(a.type===s.UploadProgress){let o=a;return{status:"progress",percentage:o.total?Math.round(100*o.loaded/o.total):0}}else{let o=a.body;return o?.isSuccess?{status:"complete",percentage:100,response:o}:{status:"error",error:o?.messageEn||"Upload failed"}}}))}validateFile(e,t){let r={image:10485760,video:524288e3,document:52428800,material:104857600},i={image:["image/jpeg","image/png","image/gif","image/webp"],video:["video/mp4","video/webm","video/quicktime"],document:["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],material:["application/pdf","application/zip","application/x-rar-compressed"]};return e.size>r[t]?{valid:!1,error:`File size exceeds maximum of ${Math.round(r[t]/(1024*1024))}MB`}:i[t].includes(e.type)?{valid:!0}:{valid:!1,error:`Invalid file type. Allowed: ${i[t].join(", ")}`}}static \u0275fac=function(t){return new(t||p)};static \u0275prov=d({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})();export{P as a};
